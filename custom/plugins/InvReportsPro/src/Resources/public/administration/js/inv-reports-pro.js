(this.webpackJsonp=this.webpackJsonp||[]).push([["inv-reports-pro"],{ADBr:function(t,e){t.exports='{% block sendlcoud_banner %}\n    <div class="inventivo-banner">\n        <img :src="\'/invreportspro/administration/img/logo-inventivo.svg\' | asset">\n    </div>\n{% endblock %}\n'},FhnF:function(t,e){t.exports='{% block inv_reports_pro_index %}\n    <sw-page class="inv-reports-pro-index" :showSmartBar="false">\n        {% block inv_reports_pro_index_content %}\n            <sw-card-view slot="content" class="inv-reports-pro-index__content">\n                <inventivo-banner/>\n\n                {% block inv_reports_pro_index_content_intro_card %}\n                    <sw-card>\n                        {% block inv_reports_pro_index_content_intro %}\n                            <div class="inv-reports-pro-index__intro">\n                                {% block inv_reports_pro_index_content_intro_content %}\n                                    <div class="inv-reports-pro-index__intro-content">\n                                        {% block inv_reports_pro_index_content_intro_content_headline %}\n                                            <h1>{{ $tc(\'inv-reports-pro.introduction.headline\') }}</h1>\n                                        {% endblock %}\n\n                                        {% block inv_reports_pro_index_content_intro_content_external_link_intro_buttons %}\n                                            <sw-container columns="1fr 1fr" gap="16px" justify="start" class="inv-reports-pro-index__intro-buttons">\n                                                {% block inv_reports_pro_index_content_intro_content_external_link_intro_buttons_feedback %}\n                                                    <sw-button variant="ghost"\n                                                               :link="$tc(\'inv-reports-pro.introduction.feedbackLink\')">\n                                                        {{ $tc(\'inv-reports-pro.introduction.feedback\') }}\n                                                    </sw-button>\n                                                {% endblock %}\n                                            </sw-container>\n                                        {% endblock %}\n                                    </div>\n                                {% endblock %}\n\n                                {% block inv_reports_pro_index_content_intro_image %}\n                                    <div class="inv-reports-pro-index__intro-image">\n                                        <img :src="\'administration/static/img/dashboard-logo.svg\' | asset">\n                                    </div>\n                                {% endblock %}\n                            </div>\n                        {% endblock %}\n                    </sw-card>\n                {% endblock %}\n\n                <template v-if="">\n                    {% block inv_reports_pro_index_content_sales_products_quarter_headline %}\n                        <div class="inv-reports-pro-index__card-headline">\n                            {% block inv_reports_pro_index_content_statistics_headline_title %}\n                                <h1>{{ $tc(\'inv-reports-pro.salesProductsQuarter.headline\') }}</h1>\n                            {% endblock %}\n                        </div>\n                    {% endblock %}\n\n                    {% block inv_reports_pro_index_content_statistics_count %}\n                        <sw-card>\n\n                        </sw-card>\n                    {% endblock %}\n                </template>\n\n                <inv-reports-pro-product-stream-list/>\n\n            </sw-card-view>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n'},Fyej:function(t,e,r){},GvC1:function(t,e,r){},rVo9:function(t,e,r){var n=r("Fyej");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("SZ7m").default)("b912caf2",n,!0,{})},ufsr:function(t,e,r){var n=r("GvC1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("SZ7m").default)("cf084a60",n,!0,{})},viQx:function(t,e,r){"use strict";r.r(e);var n=r("FhnF"),o=r.n(n);r("rVo9");const{Component:a}=Shopware,{Criteria:i}=Shopware.Data;a.register("inv-reports-pro-index",{template:o.a,inject:["repositoryFactory","stateStyleDataProviderService"],metaInfo(){return{title:this.$createTitle()}},data:()=>({historyOrderData:null,todayOrderData:[],todayOrderDataLoaded:!1}),computed:{chartOptionsOrderCount(){return{title:{text:this.$tc("inv-reports-pro.monthStats.orderNumber")},xaxis:{type:"datetime",min:this.dateAgo.getTime()},yaxis:{min:0,tickAmount:3,labels:{formatter:t=>parseInt(t,10)}}}},chartOptionsOrderSum(){return{title:{text:this.$tc("inv-reports-pro.monthStats.turnover")},xaxis:{type:"datetime",min:this.dateAgo.getTime()},yaxis:{min:0,tickAmount:5,labels:{formatter:t=>this.$options.filters.currency(t,"EUR")}}}},orderRepository(){return this.repositoryFactory.create("order")},orderCountMonthSeries(){if(!this.historyOrderData)return[];const t=this.historyOrderData.buckets.map(t=>({x:this.parseDate(t.key),y:t.count}));return[{name:this.$tc("inv-reports-pro.monthStats.numberOfOrders"),data:t}]},orderCountToday(){return this.todayBucket?this.todayBucket.count:0},orderSumMonthSeries(){if(!this.historyOrderData)return[];return[{name:"Total",data:this.historyOrderData.buckets.map(t=>({x:this.parseDate(t.key),y:t.totalAmount.sum}))}]},orderSumToday(){return this.todayBucket?this.todayBucket.totalAmount.sum:0},hasOrderToday(){return this.todayOrderData.length>0},hasOrderInMonth(){return!!this.historyOrderData},dateAgo(){const t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-30),t},today(){const t=new Date;return t.setHours(0,0,0,0),t},todayBucket(){if(!this.historyOrderData)return null;const t=this.historyOrderData.buckets.find(t=>{if(t.key){return this.parseDate(t.key)===this.today.getTime()}return!1});return t||null}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchHistoryOrderData().then(t=>{t.aggregations&&(this.historyOrderData=t.aggregations.order_count_month)}),this.todayOrderDataLoaded=!1,this.fetchTodayData().then(t=>{this.todayOrderData=t,this.todayOrderDataLoaded=!0})},fetchHistoryOrderData(){const t=new i(1,10);return t.addAggregation(i.histogram("order_count_month","orderDateTime","day",null,i.sum("totalAmount","amountTotal"))),t.addFilter(i.range("orderDate",{gte:this.formatDate(this.dateAgo)})),this.orderRepository.search(t,Shopware.Context.api)},fetchTodayData(){const t=new i(1,10);return t.addAssociation("currency"),t.addFilter(i.range("orderDate",{gte:this.formatDate(this.today)})),t.addSorting(i.sort("orderDateTime","ASC")),this.orderRepository.search(t,Shopware.Context.api)},formatDate:t=>`${t.getFullYear()}-${`0${t.getMonth()+1}`.slice(-2)}-${t.getDate()}`,orderGridColumns:()=>[{property:"orderNumber",label:"sw-order.list.columnOrderNumber",routerLink:"sw.order.detail",allowResize:!0,primary:!0},{property:"orderDateTime",dataIndex:"orderDateTime",label:"inv-reports-pro.todayStats.orderTime",allowResize:!0,primary:!1},{property:"orderCustomer.firstName",dataIndex:"orderCustomer.firstName,orderCustomer.lastName",label:"sw-order.list.columnCustomerName",allowResize:!0},{property:"stateMachineState.name",label:"sw-order.list.columnState",allowResize:!0},{property:"amountTotal",label:"sw-order.list.columnAmount",align:"right",allowResize:!0}],getVariantFromOrderState(t){return this.stateStyleDataProviderService.getStyle("order.state",t.stateMachineState.technicalName).variant},parseDate:t=>new Date(t.replace(/-/g,"/").replace("T"," ").replace(/\..*|\+.*/,"")).valueOf()}});var s=r("ADBr"),d=r.n(s);r("ufsr");const{Component:c}=Shopware;c.register("inventivo-banner",{template:d.a});const{Module:l}=Shopware;l.register("inv-reports-pro",{type:"plugin",name:"inv-reports-pro",title:"inv-reports-pro.general.mainMenuItemGeneral",description:"inv-reports-pro.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#6AD6F0",icon:"default-object-lab-flask",favicon:"icon-module-dashboard.png",routes:{index:{components:{default:"inv-reports-pro-index"},path:"index"}},navigation:[{id:"inv-reports-pro",label:"inv-reports-pro.general.mainMenuItemGeneral",color:"#6AD6F0",icon:"default-object-lab-flask",path:"inv.reports.pro.index",position:10}]})}},[["viQx","runtime","vendors-node"]]]);