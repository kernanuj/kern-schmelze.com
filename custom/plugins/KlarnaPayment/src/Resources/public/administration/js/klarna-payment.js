(this.webpackJsonp=this.webpackJsonp||[]).push([["klarna-payment"],{"1JEH":function(e,t,n){var a=n("ilpY");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("1bc36672",a,!0,{})},"1S3t":function(e,t){e.exports='{% block klarna_payment_payment_details %}\n    <div class="klarna-refund-button">\n        <sw-container v-tooltip="{message: $tc(\'klarna-payment-order-management.tooltips.refundImpossible\'), disabled: buttonEnabled}" :key="buttonEnabled">\n            <sw-button :disabled="!buttonEnabled" @click="openRefundModal">\n                {{ $tc(\'klarna-payment-order-management.buttons.refundAmount\') }}\n            </sw-button>\n        </sw-container>\n\n        <sw-modal v-if="showRefundModal" @modal-close="closeRefundModal" :title="$tc(`klarna-payment-order-management.refundModal.title`)" class="klarna-payment-detail--refund-modal">\n            <klarna-order-items\n                :klarnaOrder="klarnaOrder"\n                mode="refund"\n                v-on:select-item="onSelectItem"\n                v-on:change-quantity="onChangeQuantity">\n            </klarna-order-items>\n\n            <div class="klarna-payment-detail--refund-modal--content">\n                <sw-container columns="1fr 1fr" gap="0 32px">\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.refundModal.orderAmount\')" :value="klarnaOrder.order_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.refundModal.refundedAmount\')" :value="klarnaOrder.refunded_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.refundModal.remainingAmount\')" :value="remainingAmount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-number-field required="required" numberType="float" :digits="klarnaOrder.decimal_precision" :label="$tc(\'klarna-payment-order-management.refundModal.refundAmount\')" v-model="refundAmount" :min="minRefundValue" :max="maxRefundAmount"></sw-number-field>\n                </sw-container>\n\n                <sw-textarea-field :helpText="$tc(\'klarna-payment-order-management.refundModal.descriptionHelpText\')" v-on:input="onChangeDescription" :label="$tc(\'klarna-payment-order-management.refundModal.labelComment\')" v-model="description"></sw-textarea-field>\n            </div>\n\n            <template slot="modal-footer">\n                <sw-button :disabled="isLoading" @click="closeRefundModal">\n                    {{ $tc(\'klarna-payment-order-management.refundModal.close\') }}\n                </sw-button>\n\n                <sw-button-process :isLoading="isLoading" :processSuccess="isRefundSuccessful" @process-finish="onRefundFinished()" :disabled="isLoading" variant="primary" @click="refundOrder">\n                    {{ $tc(\'klarna-payment-order-management.refundModal.submit\') }}\n                </sw-button-process>\n            </template>\n        </sw-modal>\n    </div>\n{% endblock %}\n'},"4LBC":function(e,t,n){var a=n("LhZX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("0b131d74",a,!0,{})},"6voX":function(e,t){const{Component:n,Mixin:a}=Shopware;n.override("sw-order-detail-base",{inject:["KlarnaPaymentOrderUpdateService"],mixins:[a.getByName("notification")],methods:{onSaveEdits(){this.$emit("loading-change",!0),this.$emit("editing-change",!1),this.KlarnaPaymentOrderUpdateService.updateOrder(this.orderId,this.versionContext.versionId).then(()=>{this.$super("onSaveEdits")}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.messages.updateErrorTitle"),message:this.$tc("klarna-payment-order-management.messages.updateErrorMessage")}),this.versionContext.versionId=Shopware.Context.api.liveVersionId,this.reloadEntityData()})}}})},"8FoB":function(e,t,n){},AcHY:function(e,t,n){},CkOj:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("lSNA"),r=n.n(a),i=n("lO2t"),s=n("lYO9");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=function(e){var t;if(i.a.isString(e))try{t=JSON.parse(e)}catch(e){return!1}else{if(!i.a.isObject(e)||i.a.isArray(e))return!1;t=e}return t}(e);if(!t)return null;if(!0===t.parsed||!function(e){return void 0!==e.data||void 0!==e.errors||void 0!==e.links||void 0!==e.meta}(t))return t;var n=function(e){var t={links:null,errors:null,data:null,associations:null,aggregations:null};if(e.errors)return t.errors=e.errors,t;var n=function(e){var t=new Map;if(!e||!e.length)return t;return e.forEach((function(e){var n="".concat(e.type,"-").concat(e.id);t.set(n,e)})),t}(e.included);if(i.a.isArray(e.data))t.data=e.data.map((function(e){var a=d(e,n);return Object(s.f)(a,"associationLinks")&&(t.associations=l({},t.associations,{},a.associationLinks),delete a.associationLinks),a}));else if(i.a.isObject(e.data)){var a=d(e.data,n);Object.prototype.hasOwnProperty.call(a,"associationLinks")&&(t.associations=l({},t.associations,{},a.associationLinks),delete a.associationLinks),t.data=a}else t.data=null;e.meta&&Object.keys(e.meta).length&&(t.meta=m(e.meta));e.links&&Object.keys(e.links).length&&(t.links=e.links);e.aggregations&&Object.keys(e.aggregations).length&&(t.aggregations=e.aggregations);return t}(t);return n.parsed=!0,n}function d(e,t){var n={id:e.id,type:e.type,links:e.links||{},meta:e.meta||{}};e.attributes&&Object.keys(e.attributes).length>0&&(n=l({},n,{},m(e.attributes)));if(e.relationships){var a=function(e,t){var n={},a={};return Object.keys(e).forEach((function(r){var s=e[r];if(s.links&&Object.keys(s.links).length&&(a[r]=s.links.related),s.data){var o=s.data;i.a.isArray(o)?n[r]=o.map((function(e){return u(e,t)})):i.a.isObject(o)?n[r]=u(o,t):n[r]=null}})),{mappedRelations:n,associationLinks:a}}(e.relationships,t);n=l({},n,{},a.mappedRelations,{},{associationLinks:a.associationLinks})}return n}function m(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n],r=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));t[r]=a})),t}function u(e,t){var n="".concat(e.type,"-").concat(e.id);return t.has(n)?d(t.get(n),t):e}},EtRH:function(e,t,n){},Fuha:function(e,t,n){},HdUW:function(e,t){e.exports='{% block klarna_payment_order_cancel %}\n    <div class="klarna-cancellation">\n        <sw-container v-tooltip="{message: $tc(\'klarna-payment-order-management.tooltips.cancellationImpossible\'), disabled: !isDisabled}" :key="isDisabled">\n            <sw-button :disabled="isDisabled" @click="showModal">\n                {{ $tc(\'klarna-payment-order-management.cancellation.modalButton\') }}\n            </sw-button>\n        </sw-container>\n\n        <sw-modal class="klarna-cancellation--modal" v-if="isModalShown" @modal-close="closeModal" :title="$tc(`klarna-payment-order-management.cancellation.modal.title`)">\n            <div class="klarna-cancellation-modal--text">\n                {{ $tc(`klarna-payment-order-management.cancellation.modal.content`) }}\n            </div>\n\n            <template slot="modal-footer">\n                <sw-button :disabled="isLoading" @click="closeModal">\n                    {{ $tc(\'klarna-payment-order-management.cancellation.modal.close\') }}\n                </sw-button>\n\n                <sw-button-process\n                    class="klarna-cancellation-modal--action"\n                    :isLoading="isLoading"\n                    :processSuccess="isSuccessful"\n                    :disabled="isDisabled"\n                    variant="primary"\n                    @click="cancelPayment">\n                    {{ $tc(\'klarna-payment-order-management.cancellation.modal.submit\') }}\n                </sw-button-process>\n            </template>\n        </sw-modal>\n    </div>\n{% endblock %}\n'},Jrmi:function(e,t){const{Component:n}=Shopware;n.override("sw-system-config",{methods:{onSalesChannelChanged(e){this.$super("onSalesChannelChanged",e),this.$emit("saleschannel-changed",this.currentSalesChannelId)}},computed:{typesWithMapInheritanceSupport(){let e=this.$super("typesWithMapInheritanceSupport");return"KlarnaPayment.settings"===this.domain&&(e.push("single-select"),e.push("multi-select")),e}}})},K8HT:function(e,t,n){var a=n("AcHY");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("808d0b9c",a,!0,{})},"LEg/":function(e){e.exports=JSON.parse('{"klarna-payment-configuration":{"module":{"title":"Klarna.","description":"Klarna."},"settingsForm":{"title":"Klarna","messages":{"titleSuccess":"Erfolg","titleError":"Fehler","messageTestSuccess":"Die API-Zugangsdaten wurden erfolgreich validiert.","messageTestErrorLive":"Die API-Zugangsdaten konnten nicht validiert werden.","messageTestErrorTest":"Die API-Zugangsdaten des Testmodus konnten nicht validiert werden.","messageSaveSuccess":"Die Plugin-Einstellungen wurden gespeichert.","messageSaveError":"Die Plugin-Einstellungen konnten nicht gespeichert werden.","messageButtonKeyCreateError":"Beim Erstellen der Instant Shopping Button-Keys ist ein Fehler \\"{code}\\" aufgetreten: {message}","messageMissingApiUsername":"Für den aktiven Modus wurde kein Wert für die Option \\"Api-Benutzername\\" angegeben!","messageMissingApiPassword":"Für den aktiven Modus wurde kein Wert für die Option \\"Api-Password\\" angegeben!"},"buttons":{"save":"Einstellungen speichern","test":"API-Zugangsdaten testen","wizard":"Wizard starten"},"onsiteMessaging":{"generate":"Generiere deine Daten hier","playgroundUrl":"https://playground.eu.portal.klarna.com/on-site-messaging/#realm=merchants","defaultUrl":"https://eu.portal.klarna.com/on-site-messaging/#realm=merchants"},"klarnaPayments":{"payLater":{"description":"Die Option \\"Rechnung\\" macht Kunden den Bezahlvorgang einfach und schnell, ohne dabei persönliche Daten oder komplizierte Nummern eingeben zu müssen. Der Kunde hat die Wahl zwischen Rechnung und im Monat X bezahlen.","title":"Pay Later"},"sliceIt":{"description":"Mittels \\"Ratenkauf\\" können Kunden die Einkaufssumme bei geringen Zinsen in Häppchen aufteilen. Das erhöht den Investitionsrahmen und die Kaufkraft. Klarna\'s einzigartige Kreditbearbeitung erfordert nur wenige Augenblicke und minimale Dateneingabe. Der Kunde hat die Wahl zwischen fixen und flexiblen Raten.","title":"Ratenkauf"},"payNow":{"additional":"Für \\"Sofort bezahlen\\" müssen sowohl die kombinierte Zahlungsmethode \\"Sofort bezahlen\\" als auch die einzelnen Zahlungsmethoden \\"Kreditkarte\\", \\"Lastschrift\\" und \\"Sofortüberweisung\\" zu den Verkaufskanälen hinzugefügt werden.","description":"Kunden, die Beträge sofort vollständig beim Bestellabschluss bezahlen möchten, können die Option \\"Sofort bezahlen\\" nutzen. Zur Auswahl stehen hierbei Kreditkarte, Lastschrift und die Sofortüberweisung.","title":"Sofort bezahlen"},"instantShopping":{"domainsWithoutHttps":"Die Domain {domains} kann nicht für Instant Shopping verwendet werden.|Folgende Domains können nicht für Instant Shopping verwendet werden:","domainsWithoutHttpsRecommendation":"Bitte konfigurieren Sie Ihren Shop so das dieser nur per HTTPS erreichbar ist und entfernen Sie alle HTTP-Domains von Ihren Verkaufskanälen."}}},"wizard":{"title":"Wizard","klarnaProduct":"Genutztes Klarna Produkt","steps":{"welcome":"Willkommen","salesChannel":"Verkaufskanal","documentation":"Dokumentation"},"content":{"welcome":{"customer":"Sind Sie bereits Klarna Händler? Klicken Sie bitte auf Weiter.","registration":"Sofern Sie noch keine Registrierung bei Klarna vorgenommen haben, wenden Sie sich bitte per email an&nbsp;<a href=\'mailto:vertrieb@klarna.com\'>vertrieb@klarna.com</a>.","installation":"Für die Einrichtung und Verwendung des Plugins finden Sie die Installationsanleitung&nbsp;<a href=\'https://bit.ly/klarna-shopware-6-installationguide-de\'>HIER</a>."},"documentation":{"headline":"Vielen Dank. Die Konfiguration von Klarna ist abgeschlossen.","introduction":"Egal was Sie verkaufen, unsere Produkte sind dafür gemacht, Ihren Kunden das Beste und Ihnen das zufriedenste Kundenerlebnis zu bereiten. Wir unterstützen Sie online dabei, eine große Auswahl an Zahlungsmöglichkeiten anzubieten.","conclusion":"Um mehr über Klarna zu erfahren, klicken Sie bitte&nbsp;<a href=\'https://bit.ly/klarna-shopware-6-installationguide-de\'>HIER</a>."}},"type":{"deactivated":"Deaktiviert","payments":"Klarna Payments","checkout":"Klarna Checkout"},"action":{"back":"Zurück","next":"Weiter","finish":"Fertig"},"messages":{"titleSuccess":"Erfolg","titleError":"Fehler","messageLoadError":"Der Wizard konnte nicht geladen werden.","messageSaveSuccess":"Die Einrichtung wurde erfolgreich abgeschlossen.","messageSaveError":"Die Einrichtung konnte nicht erfolgreich abgeschlossen werden."}}}}')},LhZX:function(e,t,n){},MEVA:function(e,t){e.exports='{% block klarna_payment_authorization %}\n    <sw-container class="klarna-extend-authorization">\n        <sw-text-field :helpText="$tc(\'klarna-payment-order-management.order-details.expiryDateHelpText\')" :suffix="true" :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.expiryDate\')" :value="klarnaOrder.expiry_date | date({hour: \'2-digit\', minute: \'2-digit\'})">\n            <template slot="suffix">\n                <sw-container v-tooltip="{message: $tc(\'klarna-payment-order-management.tooltips.extendAuthorizationImpossible\'), disabled: !buttonDisabled}" :key="buttonDisabled">\n                    <sw-button :disabled="buttonDisabled" @click="openModal">\n                        {{ $tc(\'klarna-payment-order-management.buttons.extendAuthorization\') }}\n                    </sw-button>\n                </sw-container>\n            </template>\n        </sw-text-field>\n\n        <sw-modal class="klarna-payment-detail--authorization-modal klarna-authorization--modal"\n                  v-if="showModal"\n                  @modal-close="closeModal"\n                  :title="$tc(`klarna-payment-order-management.authorizationModal.title`)">\n\n            <div class="authorization-modal--text">\n                {{ $tc(`klarna-payment-order-management.authorizationModal.content`) }}\n            </div>\n\n            <template slot="modal-footer">\n                <sw-button :disabled="isLoading" @click="closeModal">\n                    {{ $tc(\'klarna-payment-order-management.authorizationModal.close\') }}\n                </sw-button>\n\n                <sw-button-process\n                    class="authorization-modal--action"\n                    variant="primary"\n                    :isLoading="isLoading"\n                    :disabled="isDisabled"\n                    :processSuccess="isSuccessful"\n                    @click="extendAuthorization">\n                    {{ $tc(\'klarna-payment-order-management.authorizationModal.submit\') }}\n                </sw-button-process>\n            </template>\n        </sw-modal>\n    </sw-container>\n{% endblock %}\n'},"Mnb+":function(e,t,n){var a=n("Fuha");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("58dee440",a,!0,{})},"Ns+A":function(e){e.exports=JSON.parse('{"klarna-payment-order-management":{"order-details":{"title":"Order details","orderNumber":"Shopware Order Number","orderAmount":"Order Total Amount","capturedAmount":"Captured Amount","refundedAmount":"Refunded Amount","remainingAmount":"Remaining Authorized Amount","remainingAmountHelpText":"The remaining authorized amount can be captured if needed.","klarnaOrderId":"Klarna Order ID","klarnaReference":"Klarna Reference","klarnaStatus":"Klarna Order Status","initialPaymentMethod":"Initial payment method","riskCheck":"Klarna Fraud Status","riskCheckHelpText":"Only transactions with status ACCEPTED can be captured","expiryDate":"Expiry Date","expiryDateHelpText":"If the expiry date is exceeded, no further action is possible on the transaction."},"order-tab":{"title":"Klarna."},"modal":{"columns":{"reference":"Product number","product":"Product","amount":"Amount","price":"Price"}},"tooltips":{"transactionCancelled":"The transaction was cancelled.","captureImpossible":"A capture can only be performed if the risk assessment was successful and authorized amount is available.","refundImpossible":"A refund can only be made if an amount has been captured.","extendAuthorizationImpossible":"The authorization has already expired or was captured and can therefore not be renewed.","releaseAmountImpossible":"There is no authorized amount left or the full amount has been captured.","cancellationImpossible":"The payment can only be cancelled if no amount has been captured yet."},"captureModal":{"title":"Capture amount","submit":"Capture amount","close":"Cancel","labelComment":"Comment","orderAmount":"Total authorized amount","capturedAmount":"Amount already captured","remainingAmount":"Remaining authorized amount","captureAmount":"Capture amount","descriptionHelpText":"The comment is currently not visible in the Klarna Merchant Portal."},"refundModal":{"title":"Refund amount","submit":"Refund amount","close":"Cancel","labelComment":"Comment","orderAmount":"Total authorized amount","refundedAmount":"Amount already refunded","remainingAmount":"Remaining refundable amount","refundAmount":"Refund amount","descriptionHelpText":"The comment is currently not visible in the Klarna Merchant Portal."},"detailModal":{"title":"Details"},"authorizationModal":{"title":"Extend authorization","content":"Do you really want to extend the authorization?","submit":"Yes, extend","close":"Cancel"},"transactionHistory":{"title":"Order history","columns":{"status":"Status","date":"Time","message":"Message"},"messages":{"CancelOrder":"Order cancelled","CancelPayment":"Cancelled payment","GetOrder":"Order requested","CreateCapture":"Capture created","CreateOrder":"Order placed","CreateRefund":"Refund created","ExtendAuthorization":"Authorization extended","Fallback":"Unknown request","ReleaseRemainingAuthorization":"Remaining amount released","UpdateAddress":"Address updated","UpdateOrder":"Order updated"},"modal":{"typeColumn":"Amount","valueColumn":"Value","noAmount":"No further information","httpStatus":"HTTP Status Code:","type":{"total":"Order Transaction Total Amount","captured":"Captured Amount in this action","refunded":"Refunded Amount in this action"},"klarnaOrderId":"Klarna Order Id:","klarnaErrorCode":"Klarna Error Code:","klarnaErrorMessages":"Error Messages:","klarnaCorrelationId":"Klarna Correlation Id:","ResponseButton":{"Shown":"Hide response","NotShown":"Show response"},"RequestButton":{"Shown":"Hide request","NotShown":"Show request"}}},"cancellation":{"messages":{"successTitle":"Success","successMessage":"The payment was successfully cancelled.","failureTitle":"Failure","failureMessage":"The payment could not be cancelled."},"modalButton":"Cancel payment","modal":{"title":"Payment cancellation","content":"Do you really want to cancel the payment?","submit":"Yes, cancel the payment","close":"Cancel"}},"release":{"messages":{"successTitle":"Success","successMessage":"The remaining authorization amount was successfully released.","errorTitle":"Error","errorMessage":"The remaining authorization amount could not be released."},"modal":{"title":"Release authorization amount","content":"Do you really want to release the remaining authorization amount?","submit":"Yes, release","close":"Cancel"}},"buttons":{"captureAmount":"Capture amount","refundAmount":"Refund amount","cancelOrder":"Cancel payment","extendAuthorization":"Extend authorization","releaseAmount":"Release amount","showDetails":"Details"},"messages":{"authorizationModal":{"extendSuccessTitle":"Success","extendSuccessMessage":"The Klarna authorization was successfully extended.","extendErrorTitle":"Error","extendErrorMessage":"The Klarna authorization could not be extended."},"loadErrorTitle":"Error","loadErrorMessage":"Klarna order details could not be loaded.","captureErrorTitle":"Error","captureErrorMessage":"Capture could not be performed successfully.","captureSuccessTitle":"Success","captureSuccessMessage":"Capture successfully completed.","refundErrorTitle":"Error","refundErrorMessage":"Refund could not be performed successfully.","refundSuccessTitle":"Success","refundSuccessMessage":"Refund successfully completed.","updateErrorTitle":"Error","updateErrorMessage":"Klarna does not approve the order change."}}}')},Ozq6:function(e,t){e.exports="{% block klarna_payment_plugin_icon %}\n<img :src=\"'klarnapayment/administration/plugin.png' | asset\">\n{% endblock %}\n"},SAZZ:function(e,t,n){var a=n("8FoB");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("89117e42",a,!0,{})},Sh1K:function(e,t,n){var a=n("aDrs");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("702b2b9b",a,!0,{})},SwLI:function(e,t,n){"use strict";n.r(t);var a=n("lwsE"),r=n.n(a),i=n("W8MJ"),s=n.n(i),o=n("CkOj"),l=function(){function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/vnd.api+json";r()(this,e),this.httpClient=t,this.loginService=n,this.apiEndpoint=a,this.contentType=i}return s()(e,[{key:"getList",value:function(t){var n=t.page,a=void 0===n?1:n,r=t.limit,i=void 0===r?25:r,s=t.sortBy,o=t.sortDirection,l=void 0===o?"asc":o,c=t.sortings,d=t.queries,m=t.term,u=t.criteria,p=t.aggregations,h=t.associations,g=t.headers,f=t.versionId,y=t.ids,k=this.getBasicHeaders(g),b={page:a,limit:i};return c?b.sort=c:s&&s.length&&(b.sort=("asc"===l.toLowerCase()?"":"-")+s),y&&(b.ids=y.join("|")),m&&(b.term=m),u&&(b.filter=[u.getQuery()]),p&&(b.aggregations=p),h&&(b.associations=h),f&&(k=Object.assign(k,e.getVersionHeader(f))),d&&(b.query=d),b.term&&b.term.length||b.filter&&b.filter.length||b.aggregations||b.sort||b.queries||b.associations?this.httpClient.post("".concat(this.getApiBasePath(null,"search")),b,{headers:k}).then((function(t){return e.handleResponse(t)})):this.httpClient.get(this.getApiBasePath(),{params:b,headers:k}).then((function(t){return e.handleResponse(t)}))}},{key:"getById",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return Promise.reject(new Error("Missing required argument: id"));var r=n,i=this.getBasicHeaders(a);return this.httpClient.get(this.getApiBasePath(t),{params:r,headers:i}).then((function(t){return e.handleResponse(t)}))}},{key:"updateById",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t)return Promise.reject(new Error("Missing required argument: id"));var i=a,s=this.getBasicHeaders(r);return this.httpClient.patch(this.getApiBasePath(t),n,{params:i,headers:s}).then((function(t){return e.handleResponse(t)}))}},{key:"deleteAssociation",value:function(e,t,n,a){if(!e||!n||!n)return Promise.reject(new Error("Missing required arguments."));var r=this.getBasicHeaders(a);return this.httpClient.delete("".concat(this.getApiBasePath(e),"/").concat(t,"/").concat(n),{headers:r}).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}))}},{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n,i=this.getBasicHeaders(a);return this.httpClient.post(this.getApiBasePath(),t,{params:r,headers:i}).then((function(t){return e.handleResponse(t)}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Promise.reject(new Error("Missing required argument: id"));var a=Object.assign({},t),r=this.getBasicHeaders(n);return this.httpClient.delete(this.getApiBasePath(e),{params:a,headers:r})}},{key:"clone",value:function(t){return t?this.httpClient.post("/_action/clone/".concat(this.apiEndpoint,"/").concat(t),null,{headers:this.getBasicHeaders()}).then((function(t){return e.handleResponse(t)})):Promise.reject(new Error("Missing required argument: id"))}},{key:"versionize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="/_action/version/".concat(this.apiEndpoint,"/").concat(e),r=Object.assign({},t),i=this.getBasicHeaders(n);return this.httpClient.post(a,{},{params:r,headers:i})}},{key:"mergeVersion",value:function(t,n,a,r){if(!t)return Promise.reject(new Error("Missing required argument: id"));if(!n)return Promise.reject(new Error("Missing required argument: versionId"));var i=Object.assign({},a),s=Object.assign(e.getVersionHeader(n),this.getBasicHeaders(r)),o="_action/version/merge/".concat(this.apiEndpoint,"/").concat(n);return this.httpClient.post(o,{},{params:i,headers:s})}},{key:"getApiBasePath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return t&&t.length&&(n+="".concat(t,"/")),e&&e.length>0?"".concat(n).concat(this.apiEndpoint,"/").concat(e):"".concat(n).concat(this.apiEndpoint)}},{key:"getBasicHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={Accept:this.contentType,Authorization:"Bearer ".concat(this.loginService.getToken()),"Content-Type":"application/json"};return Object.assign({},t,e)}},{key:"apiEndpoint",get:function(){return this.endpoint},set:function(e){this.endpoint=e}},{key:"httpClient",get:function(){return this.client},set:function(e){this.client=e}},{key:"contentType",get:function(){return this.type},set:function(e){this.type=e}}],[{key:"handleResponse",value:function(t){if(null===t.data||void 0===t.data)return t;var n=t.data,a=t.headers;return a&&a["content-type"]&&"application/vnd.api+json"===a["content-type"]&&(n=e.parseJsonApiData(n)),n}},{key:"parseJsonApiData",value:function(e){return Object(o.a)(e)}},{key:"getVersionHeader",value:function(e){return{"sw-version-id":e}}}]),e}();t.default=l},aDrs:function(e,t,n){},ayKD:function(e,t){e.exports='{% block sw_settings_content_card_slot_plugins %}\n    {% parent %}\n\n    <sw-settings-item :label="$tc(\'klarna-payment-configuration.module.title\')"\n                      :to="{ name: \'klarna.payment.configuration.settings\' }"\n                      :backgroundEnabled="false">\n        <template #icon>\n            <img :src="\'klarnapayment/administration/plugin.png\' | asset">\n        </template>\n    </sw-settings-item>\n{% endblock %}\n'},dzWO:function(e,t,n){var a=n("ryEd");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("ed3da47c",a,!0,{})},e7Al:function(e,t){const{Filter:n}=Shopware,{currency:a}=Shopware.Utils.format;n.register("klarna_currency",(e,t,n,r)=>null===e?"-":(n||(n=0),a(e/=10**n,t,r)))},g346:function(e,t,n){var a=n("wWgX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("4ad402ca",a,!0,{})},iENp:function(e,t){e.exports='{# @var \\KlarnaPayment\\Components\\Client\\Response\\GetOrderResponse klarnaOrder #}\n\n{% block klarna_payment_payment_details %}\n    <div class="klarna-order-items">\n        <sw-data-grid\n            :dataSource="orderItems"\n            :columns="orderItemColumns"\n            :showActions="false"\n            :showSelection="true"\n            v-on:select-item="onSelectItem">\n\n            <template slot="column-reference" slot-scope="{ item, isInlineEdit}">\n                <div v-tooltip="{ message: item.reference, disabled: item.reference.length <= 15 }">\n                    {{ item.reference | truncate(15, true, \'...\') }}\n                </div>\n            </template>\n\n            <template slot="column-product" slot-scope="{ item, isInlineEdit}">\n                {{ item.product }}\n            </template>\n\n            <template slot="column-price" slot-scope="{ item, isInlineEdit}">\n                {{ item.price }}\n            </template>\n\n            <template slot="column-amount" slot-scope="{ item, isInlineEdit }">\n                <sw-field\n                    :value="item.amount"\n                    type="number"\n                    :min="0"\n                    :disabled="item.disabled"\n                    :max="item.amount"\n                    slot="inline-edit"\n                    size="small"\n                    placeholder=0\n                    v-on:change="onChangeQuantity($event, item.id)">\n                </sw-field>\n            </template>\n        </sw-data-grid>\n    </div>\n{% endblock %}\n'},ilpY:function(e,t,n){},ivnq:function(e,t,n){var a=n("EtRH");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("7294e227",a,!0,{})},lO2t:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var a=n("GoyQ"),r=n.n(a),i=n("YO3V"),s=n.n(i),o=n("E+oP"),l=n.n(o),c=n("wAXd"),d=n.n(c),m=n("Z0cm"),u=n.n(m),p=n("lSCD"),h=n.n(p),g=n("YiAA"),f=n.n(g),y=n("4qC0"),k=n.n(y),b=n("Znm+"),w=n.n(b),v=n("Y+p1"),S=n.n(v),C=n("UB5X"),_=n.n(C);function O(e){return void 0===e}t.a={isObject:r.a,isPlainObject:s.a,isEmpty:l.a,isRegExp:d.a,isArray:u.a,isFunction:h.a,isDate:f.a,isString:k.a,isBoolean:w.a,isEqual:S.a,isNumber:_.a,isUndefined:O}},lYO9:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return k})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return w})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return C}));var a=n("lSNA"),r=n.n(a),i=n("QkVN"),s=n.n(i),o=n("BkRI"),l=n.n(o),c=n("mwIZ"),d=n.n(c),m=n("D1y2"),u=n.n(m),p=n("lO2t");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s.a,l.a,d.a,u.a;var f=s.a,y=l.a,k=d.a,b=u.a;function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.parse(JSON.stringify(e))}function S(e,t){return e===t?{}:p.a.isObject(e)&&p.a.isObject(t)?p.a.isDate(e)||p.a.isDate(t)?e.valueOf()===t.valueOf()?{}:t:Object.keys(t).reduce((function(n,a){if(!w(e,a))return g({},n,r()({},a,t[a]));if(p.a.isArray(t[a])){var i=C(e[a],t[a]);return Object.keys(i).length>0?g({},n,r()({},a,t[a])):n}if(p.a.isObject(t[a])){var s=S(e[a],t[a]);return!p.a.isObject(s)||Object.keys(s).length>0?g({},n,r()({},a,s)):n}return e[a]!==t[a]?g({},n,r()({},a,t[a])):n}),{}):t}function C(e,t){if(e===t)return[];if(!p.a.isArray(e)||!p.a.isArray(t))return t;if(e.length<=0&&t.length<=0)return[];if(e.length!==t.length)return t;if(!p.a.isObject(t[0]))return t.filter((function(t){return!e.includes(t)}));var n=[];return t.forEach((function(a,r){var i=S(e[r],t[r]);Object.keys(i).length>0&&n.push(t[r])})),n}},lkCP:function(e,t){e.exports='{% block klarna_payment_amount_authorization %}\n    <sw-container class="klarna-release-amount">\n        <sw-text-field :helpText="$tc(\'klarna-payment-order-management.order-details.remainingAmountHelpText\')" :suffix="true" :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.remainingAmount\')" :value="klarnaOrder.remaining_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)">\n            <template slot="suffix">\n                <sw-container v-tooltip="{message: $tc(\'klarna-payment-order-management.tooltips.releaseAmountImpossible\'), disabled: !buttonDisabled}" :key="buttonDisabled">\n                    <sw-button :disabled="buttonDisabled" @click="openModal">\n                        {{ $tc(\'klarna-payment-order-management.buttons.releaseAmount\') }}\n                    </sw-button>\n                </sw-container>\n            </template>\n        </sw-text-field>\n\n        <sw-modal class="klarna-release-amount--modal"\n                  v-if="isModalShown"\n                  @modal-close="closeModal"\n                  :title="$tc(`klarna-payment-order-management.release.modal.title`)">\n\n            <div class="klarna-release-amount-modal--content">\n                {{ $tc(\'klarna-payment-order-management.release.modal.content\') }}\n            </div>\n\n            <template slot="modal-footer">\n                <sw-button :disabled="isLoading" @click="closeModal">\n                    {{ $tc(\'klarna-payment-order-management.release.modal.close\') }}\n                </sw-button>\n\n                <sw-button-process\n                    class="klarna-release-amount-modal--action"\n                    :disable="isDisabled"\n                    :isLoading="isLoading"\n                    :processSuccess="isSuccessful"\n                    variant="primary"\n                    @click="releaseRemainingAuthorization">\n                    {{ $tc(\'klarna-payment-order-management.release.modal.submit\') }}\n                </sw-button-process>\n            </template>\n        </sw-modal>\n    </sw-container>\n{% endblock %}\n'},"mR+d":function(e,t){e.exports='{% block klarna_payment_wizard %}\n    <sw-page class="klarna-payment--wizard" v-bind:class="{ \'is--mobile\': isMobile }">\n        {% block klarna_payment_wizard_header %}\n            <template slot="smart-bar-header">\n                <h2>\n                    {{ $tc(\'klarna-payment-configuration.wizard.title\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block klarna_payment_wizard_content %}\n            <template slot="content">\n                <sw-card-view>\n                    <sw-card :isLoading="isLoading">\n                        <sw-container columns="1fr 3fr" class="klarna-payment-detail--transaction-details" gap="0px 32px">\n                            <sw-container>\n                                <sw-step-display\n                                    class="wizard-navigation"\n                                    :itemIndex="step"\n                                    :itemVariant="stepVariant">\n\n                                    <sw-step-item>\n                                        {{ $tc(\'klarna-payment-configuration.wizard.steps.welcome\') }}\n                                    </sw-step-item>\n\n                                    <sw-step-item>\n                                        {{ $tc(\'klarna-payment-configuration.wizard.steps.salesChannel\') }}\n                                    </sw-step-item>\n\n                                    <sw-step-item>\n                                        {{ $tc(\'klarna-payment-configuration.wizard.steps.documentation\') }}\n                                    </sw-step-item>\n                                </sw-step-display>\n                            </sw-container>\n\n                            <sw-container>\n                                <sw-container v-if="step == 0" gap="20px 0px">\n                                    <sw-container>\n                                        <div class="logo">\n                                            <img src="https://cdn.klarna.com/1.0/shared/image/generic/logo/de_de/basic/logo_black.png" alt="logo">\n                                        </div>\n                                    </sw-container>\n\n                                    <sw-container>\n                                        <span v-html=" $tc(\'klarna-payment-configuration.wizard.content.welcome.customer\')"></span>\n                                    </sw-container>\n\n                                    <sw-container>\n                                        <span v-html="$tc(\'klarna-payment-configuration.wizard.content.welcome.registration\')"></span>\n                                    </sw-container>\n\n                                    <sw-container>\n                                        <span v-html="$tc(\'klarna-payment-configuration.wizard.content.welcome.installation\')"></span>\n                                    </sw-container>\n                                </sw-container>\n\n                                <sw-container v-if="step == 1" gap="20px 0px">\n                                    <sw-sales-channel-switch\n                                        :label="$tc(\'sw-settings.system-config.labelSalesChannelSelect\')"\n                                        @change-sales-channel-id="onSalesChannelChanged">\n                                    </sw-sales-channel-switch>\n\n                                    <template v-for="(item, index) in salesChannels">\n                                        <sw-container columns="1fr 1fr" :class="item.id" v-if="item.id == currentSalesChannelId">\n                                            <sw-container>\n                                                {{ $tc(\'klarna-payment-configuration.wizard.klarnaProduct\') }}\n                                            </sw-container>\n\n                                            <sw-container>\n                                                <sw-field type="select" size="small" v-model="item.klarnaType">\n                                                    <option key="deactivated" value="deactivated" :selected="item.klarnaType === \'deactivated\'">\n                                                        {{ $tc(\'klarna-payment-configuration.wizard.type.deactivated\') }}\n                                                    </option>\n\n                                                    <option key="payments" value="payments" :selected="item.klarnaType === \'payments\'">\n                                                        {{ $tc(\'klarna-payment-configuration.wizard.type.payments\') }}\n                                                    </option>\n                                                </sw-field>\n                                            </sw-container>\n                                        </sw-container>\n                                    </template>\n                                </sw-container>\n\n                                <sw-container v-if="step == 2" gap="20px 0px">\n                                    <sw-container>\n                                        <span v-html="$tc(\'klarna-payment-configuration.wizard.content.documentation.headline\')"></span>\n                                    </sw-container>\n\n                                    <sw-container>\n                                        <span v-html="$tc(\'klarna-payment-configuration.wizard.content.documentation.introduction\')"></span>\n                                    </sw-container>\n\n                                    <sw-container>\n                                        <span v-html="$tc(\'klarna-payment-configuration.wizard.content.documentation.conclusion\')"></span>\n                                    </sw-container>\n                                </sw-container>\n                            </sw-container>\n                        </sw-container>\n\n                        <sw-container columns="1fr 1fr" gap="32px 32px" class="wizard-footer">\n                            <sw-button :disabled="step == minStep" size="small" @click="onBack">\n                                <b>{{ $tc(\'klarna-payment-configuration.wizard.action.back\') }}</b>\n                            </sw-button>\n\n                            <sw-button v-if="step != maxStep" size="small" variant="primary" @click="onNext">\n                                {{ $tc(\'klarna-payment-configuration.wizard.action.next\') }}\n                            </sw-button>\n\n                            <sw-button v-if="step == maxStep" size="small" variant="primary" @click="onFinish">\n                                {{ $tc(\'klarna-payment-configuration.wizard.action.finish\') }}\n                            </sw-button>\n                        </sw-container>\n                    </sw-card>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n'},oKnd:function(e,t){e.exports='{% block klarna_payment_payment_details %}\n    <div class="klarna-capture-button">\n        <sw-container v-tooltip="{message: $tc(\'klarna-payment-order-management.tooltips.captureImpossible\'), disabled: buttonEnabled}" :key="buttonEnabled">\n            <sw-button :disabled="!buttonEnabled" @click="openCaptureModal">\n                {{ $tc(\'klarna-payment-order-management.buttons.captureAmount\') }}\n            </sw-button>\n        </sw-container>\n\n        <sw-modal v-if="showCaptureModal" @modal-close="closeCaptureModal" :title="$tc(`klarna-payment-order-management.captureModal.title`)" class="klarna-payment-detail--capture-modal">\n            <klarna-order-items\n                :klarnaOrder="klarnaOrder"\n                mode="capture"\n                v-on:select-item="onSelectItem"\n                v-on:change-quantity="onChangeQuantity">\n            </klarna-order-items>\n\n            <div class="klarna-payment-detail--capture-modal--content">\n                <sw-container columns="1fr 1fr" gap="0 32px">\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.captureModal.orderAmount\')" :value="klarnaOrder.order_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.captureModal.capturedAmount\')" :value="klarnaOrder.captured_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.captureModal.remainingAmount\')" :value="klarnaOrder.remaining_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n                    <sw-number-field required="required" numberType="float" :digits="klarnaOrder.decimal_precision" :label="$tc(\'klarna-payment-order-management.captureModal.captureAmount\')" v-model="captureAmount" :min="minCaptureValue" :max="maxCaptureAmount"></sw-number-field>\n                </sw-container>\n\n                <sw-textarea-field :helpText="$tc(\'klarna-payment-order-management.captureModal.descriptionHelpText\')" v-on:input="onChangeDescription" :label="$tc(\'klarna-payment-order-management.captureModal.labelComment\')" v-model="description"></sw-textarea-field>\n            </div>\n\n            <template slot="modal-footer">\n                <sw-button :disabled="isLoading" @click="closeCaptureModal">\n                    {{ $tc(\'klarna-payment-order-management.captureModal.close\') }}\n                </sw-button>\n\n                <sw-button-process :isLoading="isLoading" :processSuccess="isCaptureSuccessful" @process-finish="onCaptureFinished()" :disabled="isLoading" variant="primary" @click="captureOrder">\n                    {{ $tc(\'klarna-payment-order-management.captureModal.submit\') }}\n                </sw-button-process>\n            </template>\n        </sw-modal>\n    </div>\n{% endblock %}\n'},ryEd:function(e,t,n){},"sb+Y":function(e,t,n){},sogD:function(e){e.exports=JSON.parse('{"klarna-payment-configuration":{"module":{"title":"Klarna.","description":"Klarna."},"settingsForm":{"title":"Klarna","messages":{"titleSuccess":"Success","titleError":"Error","messageTestSuccess":"The API credentials were successfully validated.","messageTestErrorLive":"The API credentials could not be validated.","messageTestErrorTest":"The test mode API credentials could not be validated.","messageSaveSuccess":"The plugin settings have been saved.","messageSaveError":"The plugin settings could not be saved.","messageButtonKeyCreateError":"An error \\"{code}\\" occurred during creation of the Instant Shopping button keys: {message}","messageMissingApiUsername":"No value has been provided for field \\"API Username\\" related to the active mode!","messageMissingApiPassword":"No value has been provided for field \\"API Password\\" related to the active mode!"},"buttons":{"save":"Save settings","test":"Test API credentials","wizard":"Start Wizard"},"onsiteMessaging":{"generate":"Generate your data here","playgroundUrl":"https://playground.eu.portal.klarna.com/on-site-messaging/#realm=merchants","defaultUrl":"https://eu.portal.klarna.com/on-site-messaging/#realm=merchants"},"klarnaPayments":{"payLater":{"description":"The option to pay later makes buying quicker and easier for customers: no need to fill out lengthy personal details or card number online.","title":"Pay Later"},"sliceIt":{"description":"Your customers can spread the cost of their purchases at a low interest rate, giving them flexibility and increased purchasing power. Our unique credit application requires minimal information and takes just seconds to complete.","title":"Financing"},"payNow":{"additional":"To use \\"Pay Now\\", you have to assign the payment methods \\"Pay Now\\", \\"Credit Card\\", \\"Direct Debit\\" and \\"Online Bank Transfer\\" to your sales channels.","description":"Customers who want to pay in full at checkout can do it quickly and securely with Klarna\'s Pay Now-option - using credit/debit card or direct bank transfer: Klarna Direkt, Sofort, SEPA Direct Debit.","title":"Pay Now"},"instantShopping":{"domainsWithoutHttps":"The domain {domains} is not usable for Instant Shopping.|Following domains are not usable for Instant Shopping:","domainsWithoutHttpsRecommendation":"Please configure your shop to only be accessible by HTTPS and remove any HTTP domain from your sales channel(s)."}}},"wizard":{"title":"Wizard","klarnaProduct":"Used Klarna product","steps":{"welcome":"Welcome","salesChannel":"Sales channel","documentation":"Documentation"},"content":{"welcome":{"customer":"Are you already a Klarna merchant? Please click Next.","registration":"If you have not yet registered with Klarna, please send an email to&nbsp;<a href=\'mailto:vertrieb@klarna.com\'>vertrieb@klarna.com</a>.","installation":"For setup and handling of the Klarna plugin you can find the installation guide&nbsp;<a target=\'_blank\' href=\'https://bit.ly/klarna-shopware-6-installationguide-en\'>HERE</a>."},"documentation":{"headline":"Thank you. The configuration of Klarna is completed.","introduction":"Klarna Payments are standalone payment methods. With Klarna Payments you can complement your checkout with a Klarna hosted widget located in your existing checkout. We support your online business to offer a wide range of payment options.","conclusion":"To learn more about Klarna, please click&nbsp;<a target=\'_blank\' href=\'https://bit.ly/klarna-shopware-6-installationguide-en\'>HERE</a>."}},"type":{"deactivated":"Deactivated","payments":"Klarna Payments","checkout":"Klarna Checkout"},"action":{"back":"Back","next":"Next","finish":"Finish"},"messages":{"titleSuccess":"Success","titleError":"Error","messageLoadError":"The wizard couldn\'t be loaded.","messageSaveSuccess":"Initial setup completed successfully.","messageSaveError":"The initial setup could not be completed successfully."}}}}')},uxPq:function(e,t,n){var a=n("sb+Y");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("379ae436",a,!0,{})},vFCD:function(e){e.exports=JSON.parse('{"klarna-payment-order-management":{"order-details":{"title":"Bestelldetails","orderNumber":"Shopware Bestellnummer","orderAmount":"Gesamtbetrag","capturedAmount":"Erfasster Betrag","refundedAmount":"Erstatteter Betrag","remainingAmount":"Verbleibender autorisierter Betrag","remainingAmountHelpText":"Der verbleibende autorisierte Betrag kann bei Bedarf erfasst werden.","klarnaOrderId":"Klarna Order-ID","klarnaReference":"Klarna Referenz","klarnaStatus":"Klarna Auftragsstatus","initialPaymentMethod":"Ursprüngliche Zahlart","riskCheck":"Klarna Betrugsstatus","riskCheckHelpText":"Nur Transaktionen im Status ACCEPTED können erfasst werden.","expiryDate":"Läuft ab am","expiryDateHelpText":"Wird das Ablaufdatum überschritten, ist keine weitere Aktion auf der Transaktion möglich."},"order-tab":{"title":"Klarna."},"modal":{"columns":{"reference":"Produktnummer","product":"Artikel","amount":"Menge","price":"Preis"}},"tooltips":{"transactionCancelled":"Die Transaktion wurde abgebrochen.","captureImpossible":"Eine Erfassung kann nur durchgeführt werden, wenn die Risikoprüfung erfolgreich war und ein autorisierter Betrag verfügbar ist.","refundImpossible":"Eine Rückerstattung kann nur durchgeführt werden, wenn ein Betrag vorher erfasst wurde.","extendAuthorizationImpossible":"Die Autorisierung ist bereits abgelaufen oder erfasst und kann deshalb nicht verlängert werden.","releaseAmountImpossible":"Es ist kein autorisierter Betrag mehr vorhanden oder bereits der gesamte Betrag erfasst.","cancellationImpossible":"Die Zahlung kann nur storniert werden, solange noch kein Betrag erfasst wurde."},"captureModal":{"title":"Betrag erfassen","submit":"Betrag erfassen","close":"Abbrechen","labelComment":"Kommentar","orderAmount":"Gesamter autorisierter Betrag","capturedAmount":"Schon erfasster Betrag","remainingAmount":"Verbleibender autorisierter Betrag","captureAmount":"Betrag erfassen","descriptionHelpText":"Der Kommentar ist aktuell nicht im Klarna Merchant Portal sichtbar."},"refundModal":{"title":"Betrag rückerstatten","submit":"Betrag rückerstatten","close":"Abbrechen","labelComment":"Kommentar","orderAmount":"Gesamter autorisierter Betrag","refundedAmount":"Schon rückerstatter Betrag","remainingAmount":"Verbleibender autorisierter Betrag","refundAmount":"Betrag rückerstatten","descriptionHelpText":"Der Kommentar ist aktuell nicht im Klarna Merchant Portal sichtbar."},"detailModal":{"title":"Details"},"authorizationModal":{"title":"Autorisierung verlängern","content":"Möchten Sie wirklich die Autorisierung verlängern?","submit":"Ja, verlängern","close":"Abbrechen"},"transactionHistory":{"title":"Bestellhistorie","columns":{"status":"Status","date":"Zeitpunkt","message":"Meldung"},"messages":{"CancelOrder":"Bestellung storniert","CancelPayment":"Zahlung storniert","GetOrder":"Bestellung abgerufen","CreateCapture":"Betrag erfasst","CreateOrder":"Bestellung erstellt","CreateRefund":"Betrag erstattet","ExtendAuthorization":"Autorisierung verlängert","Fallback":"Unbekannte Abfrage","ReleaseRemainingAuthorization":"Restbetrag freigegeben","UpdateAddress":"Adresse geändert","UpdateOrder":"Bestellung geändert"},"modal":{"typeColumn":"Betrag","valueColumn":"Wert","noAmount":"Keine weiteren Informationen","httpStatus":"HTTP-Statuscode:","type":{"total":"Gesamtbetrag der Transaktion","captured":"Erfasster Betrag in dieser Aktion","refunded":"Erstatteter Betrag in dieser Aktion"},"klarnaOrderId":"Klarna Bestell Id:","klarnaErrorCode":"Klarna Fehler Code:","klarnaErrorMessages":"Klarna Fehler Meldungen:","klarnaCorrelationId":"Klarna Korrelations Id:","ResponseButton":{"Shown":"Response verstecken","NotShown":"Response anzeigen"},"RequestButton":{"Shown":"Request verstecken","NotShown":"Request anzeigen"}}},"cancellation":{"messages":{"successTitle":"Erfolg","successMessage":"Die Zahlung wurde erfolgreich storniert.","failureTitle":"Fehler","failureMessage":"Die Zahlung konnte nicht storniert werden."},"modalButton":"Zahlung stornieren","modal":{"title":"Zahlungsstornierung","content":"Wollen Sie die Zahlung wirklich stornieren?","submit":"Ja, stornieren","close":"Abbrechen"}},"buttons":{"captureAmount":"Betrag erfassen","refundAmount":"Betrag rückerstatten","cancelOrder":"Bestellung stornieren","extendAuthorization":"Autorisierung verlängern","releaseAmount":"Betrag freigeben","showDetails":"Details"},"release":{"messages":{"successTitle":"Erfolg","successMessage":"Der verbleibende Betrag wurde freigegeben.","failureTitle":"Fehler","failureMessage":"Der verbleibende Betrag konnte nicht freigegeben werden."},"modal":{"title":"Verbleibenden Autorisierungsbetrag freigeben","content":"Möchten Sie wirklich den verbleibenden Autorisierungsbetrag freigeben?","submit":"Ja, freigeben","close":"Abbrechen"}},"messages":{"authorizationModal":{"extendSuccessTitle":"Erfolg","extendSuccessMessage":"Die Klarna Autorisierung wurde erfolgreich verlängert.","extendErrorTitle":"Fehler","extendErrorMessage":"Die Klarna Autorisierung konnte nicht erfolgreich verlängert werden."},"loadErrorTitle":"Fehler","loadErrorMessage":"Die Klarna Auftragsdetails konnten nicht geladen werden.","captureErrorTitle":"Fehler","captureErrorMessage":"Erfassung konnte nicht erfolgreich durchgeführt werden.","captureSuccessTitle":"Erfolg","captureSuccessMessage":"Erfassung erfolgreich durchgeführt.","refundErrorTitle":"Fehler","refundErrorMessage":"Erstattung konnte nicht erfolgreich durchgeführt werden.","refundSuccessTitle":"Erfolg","refundSuccessMessage":"Erstattung erfolgreich durchgeführt.","updateErrorTitle":"Fehler","updateErrorMessage":"Klarna hat die Änderung der Bestellung nicht akzeptiert."}}}')},vQEY:function(e,t){e.exports='{% block klarna_payment_payment_details_transaction_history %}\n<sw-card class="klarna-payment-transactionHistory" :title="$tc(\'klarna-payment-order-management.transactionHistory.title\')">\n    {% block klarna_payment_payment_details_transaction_history_data %}\n        <sw-data-grid\n            :dataSource="translatedHistory"\n            :columns="transactionHistoryColumns"\n            :showActions="true"\n            :showSelection="false">\n\n            {% block klarna_payment_payment_details_transaction_history_data_inner %}\n                {% block klarna_payment_payment_details_transaction_history_data_status %}\n                    <template slot="column-status" slot-scope="{ item }">\n                        <sw-data-grid-column-boolean v-model="!item.error" :isInlineEdit="false"></sw-data-grid-column-boolean>\n                    </template>\n                {% endblock %}\n\n                {% block klarna_payment_payment_details_transaction_history_data_date %}\n                    <template slot="column-date" slot-scope="{ item }">\n                        {{ item.date | date({ hour: \'2-digit\', minute: \'2-digit\' }) }}\n                    </template>\n                {% endblock %}\n\n                <template slot="action-modals" slot-scope="{ item }">\n                    {% block klarna_payment_payment_details_transaction_history_modal_button %}\n                        <sw-button size="small" @click="openDetailModal(item)">\n                            {{ $tc(\'klarna-payment-order-management.buttons.showDetails\') }}\n                        </sw-button>\n                    {% endblock %}\n                </template>\n            {% endblock %}\n        </sw-data-grid>\n    {% endblock %}\n\n    {% block klarna_payment_payment_details_transaction_history_modal %}\n        <sw-modal v-if="showDetailModal" @modal-close="closeDetailModal" :title="detailModalTitle" class="klarna-payment-detail--transaction-modal klarna-request--modal">\n            {% block klarna_payment_payment_details_transaction_history_modal_success %}\n                <div v-if="success" class="klarna-request klarna-request--success">\n                    <div v-if="orderAmount" class="klarna-request--amount">\n                        <sw-data-grid\n                            :dataSource="orderAmount"\n                            :columns="detailHistoryAmountColumns"\n                            :showActions="false"\n                            :showSelection="false">\n\n                            <template slot="column-type" slot-scope="{ item }">\n                                {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.type.\' + item.type) }}\n                            </template>\n\n                            <template slot="column-value" slot-scope="{ item }">\n                                {{ item.value | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision) }}\n                            </template>\n                        </sw-data-grid>\n                    </div>\n\n                    <div v-else>\n                        {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.noAmount\') }}\n                    </div>\n                </div>\n            {% endblock %}\n\n            {% block klarna_payment_payment_details_transaction_history_modal_error %}\n                <div v-else class="klarna-request--failure">\n                    <div v-if="orderAmount" class="klarna-request--amount">\n                        <sw-data-grid\n                            :dataSource="orderAmount"\n                            :columns="detailHistoryAmountColumns"\n                            :showActions="false"\n                            :showSelection="false">\n\n                            <template slot="column-type" slot-scope="{ item }">\n                                {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.type.\' + item.type) }}\n                            </template>\n\n                            <template slot="column-value" slot-scope="{ item }">\n                                {{ item.value | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision) }}\n                            </template>\n                        </sw-data-grid>\n                    </div>\n\n                    <div v-else>\n                        {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.noAmount\') }}\n                    </div>\n\n                    <div class="klarna-request-failure--order-id">\n                        <span class="text-strong">\n                            {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.klarnaOrderId\') }}\n                        </span>\n\n                        {{ klarnaOrder.order_id }}\n                    </div>\n\n                    <div class="klarna-request-failure--error-code">\n                        <span class="text-strong">{{ $tc(\'klarna-payment-order-management.transactionHistory.modal.klarnaErrorCode\') }}</span>{{ modalResponse.error_code }}\n                    </div>\n\n                    <div class="klarna-request-failure--http-status">\n                        <span class="text-strong">{{ $tc(\'klarna-payment-order-management.transactionHistory.modal.httpStatus\') }}</span>{{ modalHttpStatus }}\n                    </div>\n\n                    <div class="klarna-request-failure--error-messages">\n                        <span class="text-strong">{{ $tc(\'klarna-payment-order-management.transactionHistory.modal.klarnaErrorMessages\') }}</span>\n\n                        <ul>\n                            <li v-for="error_message in modalResponse.error_messages" class="messages-text">\n                                <span>{{ error_message }}</span>\n                            </li>\n                        </ul>\n                    </div>\n\n                    <div class="klarna-request-failure--correlation-id">\n                        <span class="text-strong">{{ $tc(\'klarna-payment-order-management.transactionHistory.modal.klarnaCorrelationId\') }}</span>{{ modalResponse.correlation_id }}\n                    </div>\n                </div>\n            {% endblock %}\n\n            {% block klarna_payment_payment_details_transaction_history_request %}\n                <div class="klarna-request--json">\n                    <sw-button v-if="stringRequest" size="small" @click="toggleRequestVisibility">\n                        <template v-if="isRequestShown">\n                            {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.RequestButton.Shown\') }}\n                        </template>\n\n                        <template v-else>\n                            {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.RequestButton.NotShown\') }}\n                        </template>\n                    </sw-button>\n\n                    <sw-button v-if="stringResponse" size="small" @click="toggleResponseVisibility">\n                        <template v-if="isResponseShown">\n                            {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.ResponseButton.Shown\') }}\n                        </template>\n\n                        <template v-else>\n                            {{ $tc(\'klarna-payment-order-management.transactionHistory.modal.ResponseButton.NotShown\') }}\n                        </template>\n                    </sw-button>\n\n                    <sw-code-editor\n                        v-if="isRequestShown"\n                        v-model="stringRequest"\n                        mode="text"\n                        :editorConfig="editorConfig"\n                        :softWraps="true"\n                        :setFocus="false"\n                    ></sw-code-editor>\n                    <sw-code-editor\n                        v-if="isResponseShown"\n                        v-model="stringResponse"\n                        mode="text"\n                        :editorConfig="editorConfig"\n                        :softWraps="true"\n                        :setFocus="false"\n                    ></sw-code-editor>\n                </div>\n            {% endblock %}\n\n        </sw-modal>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n'},wGjG:function(e,t){e.exports='{% block klarna_payment_payment_details %}\n    <div class="klarna-payment-tab" v-bind:class="{ \'is--mobile\': isMobile }">\n        <div v-if="!hasError && initialized">\n            <sw-card class="klarna-payment-details" :title="$tc(\'klarna-payment-order-management.order-details.title\')">\n                <sw-container columns="1fr 1fr" class="klarna-payment-detail--transaction-details mobile--ready" gap="0px 32px">\n                    <sw-container gap="5px">\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.klarnaReference\')" :value="klarnaOrder.reference"></sw-text-field>\n\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.orderAmount\')" :value="klarnaOrder.order_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.capturedAmount\')" :value="klarnaOrder.captured_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.refundedAmount\')" :value="klarnaOrder.refunded_amount | klarna_currency(klarnaOrder.currency, klarnaOrder.decimal_precision)"></sw-text-field>\n\n                        <klarna-release-amount :klarnaOrder="klarnaOrder" v-on:reload="loadData" v-on:subComponentLoading="setSubComponentLoading"></klarna-release-amount>\n                    </sw-container>\n\n                    <sw-container gap="5px">\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.klarnaOrderId\')" :value="klarnaOrder.order_id"></sw-text-field>\n\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.klarnaStatus\')" :value="klarnaOrder.order_status"></sw-text-field>\n\n                        <sw-text-field :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.initialPaymentMethod\')" :value="klarnaOrder.initial_payment_method"></sw-text-field>\n\n                        <sw-text-field :helpText="$tc(\'klarna-payment-order-management.order-details.riskCheckHelpText\')"  :disabled="true" :label="$tc(\'klarna-payment-order-management.order-details.riskCheck\')" :value="klarnaOrder.fraud_status"></sw-text-field>\n\n                        <klarna-payment-authorization :klarnaOrder="klarnaOrder" v-on:reload="loadData" v-on:subComponentLoading="setSubComponentLoading" ></klarna-payment-authorization>\n                    </sw-container>\n                </sw-container>\n            </sw-card>\n\n            <sw-card class="klarna-payment-actions">\n                <sw-container columns="1fr 1fr 1fr" gap="32px 32px" class="mobile--ready">\n                    <klarna-capture-button :klarnaOrder="klarnaOrder" v-on:reload="loadData"></klarna-capture-button>\n\n                    <klarna-refund-button :klarnaOrder="klarnaOrder" v-on:reload="loadData"></klarna-refund-button>\n\n                    <klarna-order-cancel :klarnaOrder="klarnaOrder" v-on:reload="loadData" v-on:subComponentLoading="setSubComponentLoading"></klarna-order-cancel>\n                </sw-container>\n            </sw-card>\n\n            <klarna-transaction-history :klarnaHistory="klarnaHistory" :klarnaOrder="klarnaOrder" ></klarna-transaction-history>\n        </div>\n\n        <sw-loader v-if="isLoading || isSubComponentLoading"></sw-loader>\n    </div>\n{% endblock %}\n'},wWgX:function(e,t,n){},wgOB:function(e,t,n){"use strict";n.r(t);var a=n("SwLI");const{Application:r}=Shopware;class i extends a.default{constructor(e,t,n="klarna_payment"){super(e,t,n)}validateCredentials(e){return this.httpClient.post(`_action/${this.getApiBasePath()}/validate-credentials`,e,{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}createButtonKeys(e){return this.httpClient.post(`_action/${this.getApiBasePath()}/create-button-keys`,e,{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}}r.addServiceProvider("KlarnaPaymentConfigurationService",e=>{const t=r.getContainer("init");return new i(t.httpClient,e.loginService)});const{Application:s}=Shopware;class o extends a.default{constructor(e,t,n="klarna_payment"){super(e,t,n)}fetchOrderData(e,t){return this.httpClient.post(`_action/${this.getApiBasePath()}/fetch_order`,{klarna_order_id:e,salesChannel:t},{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}captureOrder(e){return this.httpClient.post(`_action/${this.getApiBasePath()}/capture_order`,e,{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}refundOrder(e){return this.httpClient.post(`_action/${this.getApiBasePath()}/refund_order`,e,{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}cancelPayment(e,t,n){const r=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/cancel_payment`,{orderTransactionId:e,klarna_order_id:t,salesChannel:n},{headers:r}).then(e=>a.default.handleResponse(e))}releaseRemainingAuthorization(e,t){const n=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/release_remaining_authorization`,{klarna_order_id:e,salesChannel:t},{headers:n}).then(e=>a.default.handleResponse(e))}extendAuthorization(e){const t=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/extend_authorization`,{klarna_order_id:e},{headers:t}).then(e=>a.default.handleResponse(e))}}s.addServiceProvider("KlarnaPaymentOrderService",e=>{const t=s.getContainer("init");return new o(t.httpClient,e.loginService)});const{Application:l}=Shopware;class c extends a.default{constructor(e,t,n="klarna_payment"){super(e,t,n)}updateOrder(e,t){return this.httpClient.post(`_action/${this.getApiBasePath()}/update_order`,{orderId:e},{headers:this.getBasicHeaders(c.getVersionHeader(t))}).then(e=>a.default.handleResponse(e))}}l.addServiceProvider("KlarnaPaymentOrderUpdateService",e=>{const t=l.getContainer("init");return new c(t.httpClient,e.loginService)});const{Application:d}=Shopware;class m extends a.default{constructor(e,t,n="klarna_payment"){super(e,t,n)}finalizeInstallation(e){return this.httpClient.post(`_action/${this.getApiBasePath()}/finalize_installation`,{tableData:JSON.stringify(e)},{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}fetchData(){return this.httpClient.get(`_action/${this.getApiBasePath()}/fetch_data`,{headers:this.getBasicHeaders()}).then(e=>a.default.handleResponse(e))}}d.addServiceProvider("KlarnaPaymentWizardService",e=>{const t=d.getContainer("init");return new m(t.httpClient,e.loginService)});var u=n("Ozq6"),p=n.n(u);const{Component:h}=Shopware;h.register("klarna-payment-plugin-icon",{template:p.a});var g=n("ayKD"),f=n.n(g);const{Component:y}=Shopware;y.override("sw-settings-index",{template:f.a});var k=n("xw+3"),b=n.n(k);n("SAZZ");const{Component:w,Mixin:v,Context:S}=Shopware,{Criteria:C}=Shopware.Data;w.register("klarna-payment-settings",{template:b.a,mixins:[v.getByName("notification"),v.getByName("sw-inline-snippet")],inject:["repositoryFactory","KlarnaPaymentConfigurationService"],data:()=>({isLoading:!1,isTesting:!1,isTestSuccessful:!1,isSaveSuccessful:!1,config:{},paymentMethods:[],externalCheckoutPaymentMethods:[],configDomain:"KlarnaPayment.settings.",salesChannelDomainsWithoutHttps:[]}),metaInfo(){return{title:this.$createTitle()}},created(){this.createdComponent()},computed:{paymentMethodRepository(){return this.repositoryFactory.create("payment_method")},salesChannelDomainRepository(){return this.repositoryFactory.create("sales_channel_domain")}},methods:{createdComponent(){const e=this;this.setSalesChannelDomainsWithoutHttps(),this.paymentMethodRepository.search(new C,S.api).then(t=>{t.forEach(t=>{e.paymentMethods.push({value:t.id,label:t.name}),"handler_swag_paypalpaymenthandler"===t.formattedHandlerIdentifier&&e.externalCheckoutPaymentMethods.push({value:t.id,label:t.name})})})},setSalesChannelDomainsWithoutHttps(){const e=this;let t=new C;t.addFilter(C.not("AND",[C.contains("url","https://")])),this.$refs.systemConfig&&this.$refs.systemConfig.currentSalesChannelId&&t.addFilter(C.equals("salesChannelId",this.$refs.systemConfig.currentSalesChannelId)),e.salesChannelDomainsWithoutHttps=[],this.salesChannelDomainRepository.search(t,S.api).then(t=>{t.forEach(t=>{e.salesChannelDomainsWithoutHttps.push(t.url)})})},getConfigValue(e){if(void 0===this.$refs.systemConfig)return null;const t=this.$refs.systemConfig.actualConfigData.null;return null===this.$refs.systemConfig.currentSalesChannelId?this.config[this.configDomain+e]:this.config[this.configDomain+e]||t[this.configDomain+e]},onTest(){this.isTestSuccessful=!1,this.isTesting=!0;const e={apiUsername:this.getConfigValue("apiUsername"),apiPassword:this.getConfigValue("apiPassword"),testMode:this.getConfigValue("testMode"),testApiUsername:this.getConfigValue("testApiUsername"),testApiPassword:this.getConfigValue("testApiPassword"),salesChannel:this.$refs.systemConfig.currentSalesChannelId};this.KlarnaPaymentConfigurationService.validateCredentials(e).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleSuccess"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageTestSuccess")}),this.isTestSuccessful=!0}).catch(e=>{"live"===e.response.data.mode?this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageTestErrorLive")}):this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageTestErrorTest")})}).finally(()=>{this.isTesting=!1})},onSave(){this.isSaveSuccessful=!1,this.isLoading=!0,this.validateCredentials()?this.$refs.systemConfig.saveAll().then(()=>{if(this.createNotificationSuccess({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleSuccess"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageSaveSuccess")}),this.isSaveSuccessful=!0,this.getConfigValue("instantShoppingEnabled")){const e={salesChannel:this.$refs.systemConfig.currentSalesChannelId};this.KlarnaPaymentConfigurationService.createButtonKeys(e).catch(e=>{this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$t(e.response.data.message,e.response.data.data),autoClose:!1})})}}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageSaveError")})}).finally(()=>{this.isLoading=!1}):this.isLoading=!1},validateCredentials(){let e="",t="",n=!0;return this.getConfigValue("testMode")?(e=this.getConfigValue("testApiUsername"),t=this.getConfigValue("testApiPassword")):(e=this.getConfigValue("apiUsername"),t=this.getConfigValue("apiPassword")),e||(this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageMissingApiUsername")}),n=!1),t||(this.createNotificationError({title:this.$tc("klarna-payment-configuration.settingsForm.messages.titleError"),message:this.$tc("klarna-payment-configuration.settingsForm.messages.messageMissingApiPassword")}),n=!1),n},onConfigChange(e){this.config=e,this.redirectToWizard()},redirectToWizard(){this.getConfigValue("isInitialized")||this.$router.push({name:"klarna.payment.configuration.wizard"})},onSaveFinished(){this.isSaveSuccessful=!1},onTestFinished(){this.isTestSuccessful=!1},getBind(e,t){return t!==this.config&&(this.config=t),e},disableField(e){return e.name===`${this.configDomain}klarnaType`},onWizard(){this.$router.push({name:"klarna.payment.configuration.wizard"})},displayField(e,t){return e.name!==`${this.configDomain}isInitialized`&&(e.name===`${this.configDomain}onsiteMessagingScript`||e.name===`${this.configDomain}onsiteMessagingSnippet`?!0===t[`${this.configDomain}isOnsiteMessagingActive`]:e.name===`${this.configDomain}captureOrderStatus`?"orderStatus"===t[`${this.configDomain}automaticCapture`]:e.name===`${this.configDomain}captureDeliveryStatus`?"deliveryStatus"===t[`${this.configDomain}automaticCapture`]:e.name===`${this.configDomain}refundOrderStatus`?"orderStatus"===t[`${this.configDomain}automaticRefund`]:e.name===`${this.configDomain}refundDeliveryStatus`?"deliveryStatus"===t[`${this.configDomain}automaticRefund`]:e.name===`${this.configDomain}newsletterCheckboxLabel`?t[`${this.configDomain}enableNewsletterCheckbox`]:e.name===`${this.configDomain}accountCheckboxLabel`?t[`${this.configDomain}enableAccountCheckbox`]:e.name===`${this.configDomain}kcoFooterBadgeStyle`||e.name===`${this.configDomain}kcoFooterBadgeCountryCode`||e.name===`${this.configDomain}kcoFooterBadgeWidth`?t[`${this.configDomain}kcoDisplayFooterBadge`]:e.name===`${this.configDomain}instantShoppingVariation`||e.name===`${this.configDomain}instantShoppingType`?t[`${this.configDomain}instantShoppingEnabled`]:e.name!==`${this.configDomain}termsCategory`||t[`${this.configDomain}instantShoppingEnabled`])},getOrderStatusCriteria(){const e=new C(1,100);return e.addFilter(C.equals("stateMachine.technicalName","order.state")),e},getDeliveryStatusCriteria(){const e=new C(1,100);return e.addFilter(C.equals("stateMachine.technicalName","order_delivery.state")),e},getTermsCriteria(){const e=new C(1,100);return e.addFilter(C.equals("visible",1)),e.addFilter(C.equals("active",1)),e}}});var _=n("mR+d"),O=n.n(_);n("1JEH");const{Component:$,Mixin:x}=Shopware;$.register("klarna-payment-wizard",{template:O.a,mixins:[x.getByName("notification"),x.getByName("sw-inline-snippet")],inject:["KlarnaPaymentWizardService"],data:()=>({isLoading:!0,currentSalesChannelId:null,splitBreakpoint:1024,minStep:0,maxStep:2,isInitialized:!1,salesChannels:[],isMobile:null,step:0,stepVariant:"info"}),created(){this.createdComponent()},methods:{createdComponent(){this.checkViewport(),this.registerListener(),this.loadTableData()},loadTableData(){this.KlarnaPaymentWizardService.fetchData().then(e=>{this.salesChannels=e.data.salesChannels,this.isInitialized=e.data.isInitialized}).catch(()=>{this.createErrorNotification({title:this.$tc("klarna-payment-configuration.wizard.messages.titleError"),message:this.$tc("klarna-payment-configuration.wizard.messages.messageLoadError")})}).finally(()=>{this.isLoading=!1})},registerListener(){this.$device.onResize({listener:this.checkViewport.bind(this)})},checkViewport(){this.isMobile=this.$device.getViewportWidth()<this.splitBreakpoint},onNext(){this.step=this.step+1,this.step>this.maxStep&&(this.step=this.maxStep)},onBack(){this.step=this.step-1,this.step<this.minStep&&(this.step=this.minStep)},onFinish(){this.isLoading=!0,this.KlarnaPaymentWizardService.finalizeInstallation(this.salesChannels).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-configuration.wizard.messages.titleSuccess"),message:this.$tc("klarna-payment-configuration.wizard.messages.messageSaveSuccess")}),this.$router.push({name:"klarna.payment.configuration.settings"})}).catch(()=>{this.createErrorNotification({title:this.$tc("klarna-payment-configuration.wizard.messages.titleError"),message:this.$tc("klarna-payment-configuration.wizard.messages.messageSaveError")})}).finally(()=>{this.isLoading=!1})},onSalesChannelChanged(e){this.currentSalesChannelId=e}}});var A=n("LEg/"),E=n("sogD");const{Module:M}=Shopware;M.register("klarna-payment-configuration",{type:"plugin",name:"KlarnaPayment",title:"klarna-payment-configuration.module.title",description:"klarna-payment-configuration.module.description",version:"1.0.0",targetVersion:"1.0.0",snippets:{"de-DE":A,"en-GB":E},routes:{settings:{component:"klarna-payment-settings",path:"settings",meta:{parentPath:"sw.settings.index"}},wizard:{component:"klarna-payment-wizard",path:"wizard",meta:{parentPath:"sw.settings.index"}}}});var D=n("yZQw"),P=n.n(D);n("Mnb+");const{Component:T,Context:z}=Shopware,{Criteria:R}=Shopware.Data;T.override("sw-order-detail",{template:P.a,data:()=>({klarnaTransactions:[]}),computed:{isEditable(){return 0===this.klarnaTransactions.length||"klarna-payment-order-management.payment.detail"!==this.$route.name}},watch:{orderId:{deep:!0,handler(){this.klarnaTransactions=[],this.orderId&&this.loadOrderData()},immediate:!0}},methods:{loadOrderData(){const e=this.repositoryFactory.create("order"),t=new R(1,1);return t.addAssociation("transactions"),t.addAssociation("transactions.stateMachineState"),e.get(this.$route.params.id,z.api,t).then(e=>{this.loadKlarnaTransactions(e)})},loadKlarnaTransactions(e){e.transactions.forEach(e=>{e.customFields&&e.customFields.klarna_order_id&&this.klarnaTransactions.push({transaction:e.id,cancelled:"cancelled"===e.stateMachineState.technicalName})})}}});n("6voX");var B=n("wGjG"),I=n.n(B);n("uxPq");const{Component:H,Mixin:L,Context:K}=Shopware,{Criteria:q}=Shopware.Data;H.register("klarna-payment-tab",{template:I.a,data:()=>({identifier:"",initialized:!1,isLoading:!0,isSubComponentLoading:!1,hasError:!1,klarnaOrder:{},splitBreakpoint:1024,isMobile:!1,klarnaHistory:{},orderAmount:[]}),created(){this.createdComponent()},destroyed(){this.destroyedComponent()},watch:{$route(){this.loadData()}},mixins:[L.getByName("notification")],inject:["KlarnaPaymentOrderService","repositoryFactory"],methods:{createdComponent(){this.$root.$on("language-change",this.loadData),this.$device.onResize({listener:this.checkViewport.bind(this)}),this.checkViewport(),this.loadData()},destroyedComponent(){this.$root.$off("language-change",this.loadData)},checkViewport(){this.isMobile=this.$device.getViewportWidth()<this.splitBreakpoint},loadData(){const e=this;e.isLoading=!0,e.hasError=!1;const t=this.repositoryFactory.create("order_transaction"),n=new q(1,1);return n.addAssociation("order"),t.get(this.$route.params.transaction,K.api,n).then(t=>{const n=t.customFields.klarna_order_id,a=t.order.salesChannelId;e.$emit("identifier-change",t.order.orderNumber),e.KlarnaPaymentOrderService.fetchOrderData(n,a).then(t=>{e.hasError=!1,e.initialized=!0,e.klarnaOrder=t.order,e.klarnaOrder.salesChannel=a,e.klarnaOrder.orderTransactionId=this.$route.params.transaction,e.klarnaHistory=t.transactionHistory}).catch(()=>{e.createNotificationError({title:e.$tc("klarna-payment-order-management.messages.loadErrorTitle"),message:e.$tc("klarna-payment-order-management.messages.loadErrorMessage")}),e.hasError=!0}).finally(()=>{e.isLoading=!1})}).catch(()=>{e.createNotificationError({title:e.$tc("klarna-payment-order-management.messages.loadErrorTitle"),message:e.$tc("klarna-payment-order-management.messages.loadErrorMessage")}),e.hasError=!0,e.isLoading=!1})},setSubComponentLoading(e){this.isSubComponentLoading=e}}});var F=n("oKnd"),N=n.n(F);n("g346");const{Component:j,Mixin:W}=Shopware;j.register("klarna-capture-button",{template:N.a,mixins:[W.getByName("notification")],inject:["KlarnaPaymentOrderService"],props:{klarnaOrder:{type:Object,required:!0}},data:()=>({isLoading:!1,hasError:!1,showCaptureModal:!1,isCaptureSuccessful:!1,selection:[],captureAmount:0,description:""}),computed:{buttonEnabled(){return"ACCEPTED"===this.klarnaOrder.fraud_status&&("CANCELLED"!==this.klarnaOrder.order_status&&!(this.klarnaOrder.remaining_amount<=0))},maxCaptureAmount(){return this.klarnaOrder.remaining_amount/10**this.klarnaOrder.decimal_precision},minCaptureValue(){return 1/10**this.klarnaOrder.decimal_precision}},methods:{openCaptureModal(){this.showCaptureModal=!0,this.isCaptureSuccessful=!1,this.captureAmount=this.klarnaOrder.remaining_amount/10**this.klarnaOrder.decimal_precision,this.description="",this.selection=[]},calculateCaptureAmount(){let e=0;this.selection.forEach(t=>{t.selected&&(e+=t.unit_price*t.quantity)}),(0===e||e>this.klarnaOrder.remaining_amount)&&(e=this.klarnaOrder.remaining_amount),e/=10**this.klarnaOrder.decimal_precision,this.captureAmount=e},closeCaptureModal(){this.showCaptureModal=!1},onCaptureFinished(){this.isCaptureSuccessful=!1},captureOrder(){this.isLoading=!0;const e=[];this.selection.forEach(t=>{this.klarnaOrder.order_lines.forEach(n=>{if(n.reference===t.reference&&t.selected&&t.quantity){const a={...n};a.quantity=t.quantity,a.total_amount=a.unit_price*a.quantity;const r=a.tax_rate/10**this.klarnaOrder.decimal_precision;a.total_tax_amount=Math.round(a.total_amount/(100+r)*r),e.push(a)}})});const t={orderTransactionId:this.klarnaOrder.orderTransactionId,klarna_order_id:this.klarnaOrder.order_id,salesChannel:this.klarnaOrder.salesChannel,captureAmount:this.captureAmount,description:this.description,orderLines:JSON.stringify(e),decimalPrecision:this.klarnaOrder.decimal_precision,complete:this.captureAmount===this.maxCaptureAmount};this.KlarnaPaymentOrderService.captureOrder(t).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-order-management.messages.captureSuccessTitle"),message:this.$tc("klarna-payment-order-management.messages.captureSuccessMessage")}),this.isCaptureSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.messages.captureErrorTitle"),message:this.$tc("klarna-payment-order-management.messages.captureErrorMessage")}),this.isCaptureSuccessful=!1}).finally(()=>{this.isLoading=!1,this.showCaptureModal=!1,this.$emit("reload")})},onSelectItem(e,t){0===this.selection.length&&this._populateSelectionProperty(),this.selection.forEach(n=>{n.reference===e&&(n.selected=t)}),this.calculateCaptureAmount()},onChangeQuantity(e,t){0===this.selection.length&&this._populateSelectionProperty(),this.selection.forEach(n=>{n.reference===e&&(n.quantity=t)}),this.calculateCaptureAmount()},onChangeDescription(e){e.length>=255?this.description=e.substr(0,255):this.description=e},_populateSelectionProperty(){this.klarnaOrder.order_lines.forEach(e=>{this.selection.push({quantity:e.quantity-e.captured_quantity,reference:e.reference,unit_price:e.unit_price,selected:!1})})}}});var V=n("iENp"),Z=n.n(V);const{Component:U}=Shopware;U.register("klarna-order-items",{template:Z.a,props:{klarnaOrder:{type:Object,required:!0},mode:{type:String,required:!1}},computed:{orderItems(){const e=[];return this.klarnaOrder.order_lines.forEach(t=>{const n=this.$options.filters.klarna_currency(t.total_amount,this.klarnaOrder.currency,this.klarnaOrder.decimal_precision);let a=!1,r=t.quantity;"refund"===this.mode&&t.captured_quantity>0&&(r=t.captured_quantity),"capture"===this.mode?r-=t.captured_quantity:"refund"===this.mode&&(r-=t.refunded_quantity),r<=0&&(a=!0),e.push({id:t.reference,reference:t.reference,product:t.name,amount:r,disabled:a,price:n,orderItem:t})}),e},orderItemColumns(){return[{property:"reference",label:this.$tc("klarna-payment-order-management.modal.columns.reference"),rawData:!0},{property:"product",label:this.$tc("klarna-payment-order-management.modal.columns.product"),rawData:!0},{property:"amount",label:this.$tc("klarna-payment-order-management.modal.columns.amount"),rawData:!0},{property:"price",label:this.$tc("klarna-payment-order-management.modal.columns.price"),rawData:!0}]}},methods:{onSelectItem(e,t,n){this.$emit("select-item",t.id,n)},onChangeQuantity(e,t){this.$emit("change-quantity",t,e)}}});var J=n("MEVA"),G=n.n(J);n("ivnq");const{Component:Y,Mixin:Q}=Shopware;Y.register("klarna-payment-authorization",{template:G.a,props:{klarnaOrder:{type:Object,required:!0}},inject:["KlarnaPaymentOrderService"],mixins:[Q.getByName("notification")],computed:{buttonDisabled(){return Date.parse(this.klarnaOrder.expiry_date)<new Date("now")||this.klarnaOrder.remaining_amount<=0||"CANCELLED"===this.klarnaOrder.order_status}},data:()=>({showModal:!1,isDisabled:!1,isLoading:!1,isSuccessful:!1}),methods:{extendAuthorization(){this.$emit("subComponentLoading",!0),this.isLoading=!0,this.isDisabled=!0,this.KlarnaPaymentOrderService.extendAuthorization(this.klarnaOrder.order_id).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-order-management.messages.authorizationModal.extendSuccessTitle"),message:this.$tc("klarna-payment-order-management.messages.authorizationModal.extendSuccessMessage")}),this.isSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.messages.authorizationModal.extendErrorTitle"),message:this.$tc("klarna-payment-order-management.messages.authorizationModal.extendErrorMessage")}),this.isSuccessful=!1}).finally(()=>{this.$emit("subComponentLoading",!1),this.$emit("reload",!0),this.isLoading=!1,this.showModal=!1,this.isDisabled=!1})},openModal(){this.showModal=!0,this.isSuccessful=!1},closeModal(){this.showModal=!1}}});var X=n("HdUW"),ee=n.n(X);n("dzWO");const{Component:te,Mixin:ne}=Shopware;te.register("klarna-order-cancel",{template:ee.a,props:{klarnaOrder:{type:Object,required:!0}},data:()=>({isLoading:!1,isSuccessful:!1,isModalShown:!1}),computed:{isDisabled(){return!(0===this.klarnaOrder.captured_amount&&"CANCELLED"!==this.klarnaOrder.order_status)}},mixins:[ne.getByName("notification")],inject:["KlarnaPaymentOrderService"],methods:{showModal(){this.isModalShown=!0,this.isSuccess=!1},closeModal(){this.isModalShown=!1},cancelPayment(){this.$emit("subComponentLoading",!0),this.isDisabled=!0,this.isLoading=!0,this.KlarnaPaymentOrderService.cancelPayment(this.klarnaOrder.orderTransactionId,this.klarnaOrder.order_id,this.klarnaOrder.salesChannel).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-order-management.cancellation.messages.successTitle"),message:this.$tc("klarna-payment-order-management.cancellation.messages.successMessage")}),this.isSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.cancellation.messages.failureTitle"),message:this.$tc("klarna-payment-order-management.cancellation.messages.failureMessage")}),this.isSuccessful=!1}).finally(()=>{this.$emit("reload"),this.$emit("subComponentLoading",!1),this.isLoading=!1,this.isModalShown=!1})}}});var ae=n("1S3t"),re=n.n(ae);n("K8HT");const{Component:ie,Mixin:se}=Shopware;ie.register("klarna-refund-button",{template:re.a,mixins:[se.getByName("notification")],inject:["KlarnaPaymentOrderService"],props:{klarnaOrder:{type:Object,required:!0}},data:()=>({isLoading:!1,hasError:!1,showRefundModal:!1,isRefundSuccessful:!1,selection:[],refundAmount:0,description:""}),computed:{remainingAmount(){return this.klarnaOrder.captured_amount-this.klarnaOrder.refunded_amount},buttonEnabled(){return!(this.remainingAmount<=0)&&("CANCELLED"!==this.klarnaOrder.order_status&&!(this.klarnaOrder.captured_amount<=0))},maxRefundAmount(){return this.remainingAmount/10**this.klarnaOrder.decimal_precision},minRefundValue(){return 1/10**this.klarnaOrder.decimal_precision}},methods:{openRefundModal(){this.showRefundModal=!0,this.isRefundSuccessful=!1,this.refundAmount=this.remainingAmount/10**this.klarnaOrder.decimal_precision,this.description="",this.selection=[]},calculateRefundAmount(){let e=0;this.selection.forEach(t=>{t.selected&&(e+=t.unit_price*t.quantity)}),(0===e||e>this.remainingAmount)&&(e=this.remainingAmount),e/=10**this.klarnaOrder.decimal_precision,this.refundAmount=e},closeRefundModal(){this.showRefundModal=!1},onRefundFinished(){this.isRefundSuccessful=!1},refundOrder(){this.isLoading=!0;const e=[];this.selection.forEach(t=>{this.klarnaOrder.order_lines.forEach(n=>{if(n.reference===t.reference&&t.selected&&t.quantity>0){const a={...n};a.quantity=t.quantity,a.total_amount=a.unit_price*a.quantity;const r=a.tax_rate/10**this.klarnaOrder.decimal_precision;a.total_tax_amount=Math.round(a.total_amount/(100+r)*r),e.push(a)}})});const t={orderTransactionId:this.klarnaOrder.orderTransactionId,klarna_order_id:this.klarnaOrder.order_id,salesChannel:this.klarnaOrder.salesChannel,refundAmount:this.refundAmount,description:this.description,orderLines:JSON.stringify(e),decimalPrecision:this.klarnaOrder.decimal_precision,complete:this.refundAmount===this.maxRefundAmount};this.KlarnaPaymentOrderService.refundOrder(t).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-order-management.messages.refundSuccessTitle"),message:this.$tc("klarna-payment-order-management.messages.refundSuccessMessage")}),this.isRefundSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.messages.refundErrorTitle"),message:this.$tc("klarna-payment-order-management.messages.refundErrorMessage")}),this.isRefundSuccessful=!1}).finally(()=>{this.$emit("reload"),this.isLoading=!1,this.showRefundModal=!1})},onSelectItem(e,t){0===this.selection.length&&this._populateSelectionProperty(),this.selection.forEach(n=>{n.reference===e&&(n.selected=t)}),this.calculateRefundAmount()},onChangeQuantity(e,t){0===this.selection.length&&this._populateSelectionProperty(),this.selection.forEach(n=>{n.reference===e&&(n.quantity=t)}),this.calculateRefundAmount()},onChangeDescription(e){e.length>=255?this.description=e.substr(0,255):this.description=e},_populateSelectionProperty(){this.klarnaOrder.order_lines.forEach(e=>{let t=e.quantity;e.captured_quantity>0&&(t=e.captured_quantity),this.selection.push({quantity:t-e.refunded_quantity,reference:e.reference,unit_price:e.unit_price,selected:!1})})}}});var oe=n("lkCP"),le=n.n(oe);n("Sh1K");const{Component:ce,Mixin:de}=Shopware;ce.register("klarna-release-amount",{template:le.a,props:{klarnaOrder:{type:Object,required:!0}},data:()=>({isLoading:!1,isDisabled:!1,isSuccessful:!1,isModalShown:!1}),mixins:[de.getByName("notification")],inject:["KlarnaPaymentOrderService"],computed:{buttonDisabled(){return"CANCELLED"===this.klarnaOrder.order_status||(this.klarnaOrder.remaining_amount<=0||this.klarnaOrder.captured_amount<=0)}},methods:{releaseRemainingAuthorization(){this.$emit("subComponentLoading",!0),this.isDisabled=!0,this.isLoading=!0,this.KlarnaPaymentOrderService.releaseRemainingAuthorization(this.klarnaOrder.order_id,this.klarnaOrder.salesChannel).then(()=>{this.createNotificationSuccess({title:this.$tc("klarna-payment-order-management.release.messages.successTitle"),message:this.$tc("klarna-payment-order-management.release.messages.successMessage")}),this.isSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("klarna-payment-order-management.release.messages.errorTitle"),message:this.$tc("klarna-payment-order-management.release.messages.errorMessage")}),this.isSuccessful=!1}).finally(()=>{this.$emit("reload"),this.$emit("subComponentLoading",!1),this.isLoading=!1,this.isModalShown=!1,this.isDisabled=!1})},openModal(){this.isModalShown=!0},closeModal(){this.isModalShown=!1}}});var me=n("vQEY"),ue=n.n(me);n("4LBC");const{Component:pe,Mixin:he}=Shopware;pe.register("klarna-transaction-history",{template:ue.a,props:{klarnaHistory:{type:Array,required:!0},klarnaOrder:{type:Object,required:!0}},data:()=>({isLoading:!0,hasError:!1,showDetailModal:!1,modalRequest:{},modalResponse:{},modalHttpStatus:null,isResponseShown:!1,isRequestShown:!1,stringResponse:"",stringRequest:"",translatedHistory:[]}),watch:{modalRequest:{deep:!0,immediate:!0,handler(){this.orderAmount=[{type:"total",value:this.klarnaOrder.order_amount}],this.modalRequest.captured_amount&&this.orderAmount.push({type:"captured",value:this.modalRequest.captured_amount}),this.modalRequest.refunded_amount&&this.orderAmount.push({type:"refunded",value:this.modalRequest.refunded_amount})}},klarnaHistory:{deep:!0,immediate:!0,handler(){const e="klarna-payment-order-management.transactionHistory.messages.";this.translatedHistory=[],this.klarnaHistory.forEach(t=>{const n=e+t.message,a=this.$tc(n),r=Object.assign({},t);r.message=a===n?`${this.$tc(`${e}Fallback`)} (${t.message})`:a,this.translatedHistory.push(r)})}}},inject:["KlarnaPaymentOrderService"],mixins:[he.getByName("notification")],computed:{editorConfig:()=>({readOnly:!0}),transactionHistoryColumns(){return[{property:"status",label:this.$tc("klarna-payment-order-management.transactionHistory.columns.status"),rawData:!0},{property:"date",label:this.$tc("klarna-payment-order-management.transactionHistory.columns.date"),rawData:!0},{property:"message",label:this.$tc("klarna-payment-order-management.transactionHistory.columns.message"),rawData:!0}]},detailHistoryAmountColumns(){return[{property:"type",label:this.$tc("klarna-payment-order-management.transactionHistory.modal.typeColumn"),rawData:"true"},{property:"value",label:this.$tc("klarna-payment-order-management.transactionHistory.modal.valueColumn"),rawData:"true"}]}},methods:{openDetailModal(e){const t=JSON.parse(e.response),n=JSON.parse(e.request);this.showDetailModal=!0,this.success=!e.error,this.detailModalTitle=`${this.$tc("klarna-payment-order-management.detailModal.title")} - ${e.message}`,this.modalRequest=n,this.modalResponse=t,this.modalHttpStatus=e.statusCode?e.statusCode:null,0!==Object.keys(t).length&&t.constructor===Object&&(this.stringResponse=JSON.stringify(t,null,2).trimLeft()),0!==Object.keys(n).length&&n.constructor===Object&&(this.stringRequest=JSON.stringify(n,null,2).trimLeft())},closeDetailModal(){this.showDetailModal=!1,this.modalRequest=null,this.modalResponse=null,this.stringResponse="",this.stringRequest="",this.isRequestShown=!1,this.isResponseShown=!1},toggleResponseVisibility(){this.isResponseShown=!this.isResponseShown,this.isRequestShown=!1},toggleRequestVisibility(){this.isRequestShown=!this.isRequestShown,this.isResponseShown=!1}}});n("e7Al");var ge=n("vFCD"),fe=n("Ns+A");const{Module:ye}=Shopware;ye.register("klarna-payment-order-management",{type:"plugin",name:"KlarnaPayment",title:"klarna-payment-order-management.general.title",description:"klarna-payment-order-management.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",snippets:{"de-DE":ge,"en-GB":fe},routeMiddleware(e,t){"sw.order.detail"===t.name&&t.children.push({component:"klarna-payment-tab",name:"klarna-payment-order-management.payment.detail",isChildren:!0,meta:{parentPath:"sw.order.index"},path:"/sw/order/detail/:id/klarna/:transaction"}),e(t)}});n("Jrmi")},"xw+3":function(e,t){e.exports='{% block klarna_payment_settings %}\n    <sw-page class="klarna-payment">\n        {% block klarna_payment_settings_header %}\n            <template slot="smart-bar-header">\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'klarna-payment-configuration.settingsForm.title\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block klarna_payment_settings_actions %}\n            <template slot="smart-bar-actions">\n                {% block klarna_payment_settings_actions_wizard %}\n                    <sw-button\n                        :disabled="isLoading || isTesting"\n                        @click="onWizard">\n                        {{ $tc(\'klarna-payment-configuration.settingsForm.buttons.wizard\') }}\n                    </sw-button>\n                {% endblock %}\n                {% block klarna_payment_settings_actions_test %}\n                    <sw-button-process\n                        :isLoading="isTesting"\n                        :processSuccess="isTestSuccessful"\n                        @process-finish="onTestFinished()"\n                        :disabled="isLoading"\n                        @click="onTest">\n                        {{ $tc(\'klarna-payment-configuration.settingsForm.buttons.test\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n                {% block klarna_payment_settings_actions_save %}\n                    <sw-button-process\n                        class="sw-settings-login-registration__save-action"\n                        :isLoading="isLoading"\n                        :processSuccess="isSaveSuccessful"\n                        @process-finish="onSaveFinished()"\n                        :disabled="isLoading || isTesting"\n                        variant="primary"\n                        @click="onSave">\n                        {{ $tc(\'klarna-payment-configuration.settingsForm.buttons.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block klarna_payment_settings_content %}\n            <template slot="content">\n                <sw-card-view>\n                    <sw-system-config\n                        ref="systemConfig"\n                        salesChannelSwitchable\n                        inherit\n                        @config-changed="onConfigChange"\n                        @saleschannel-changed="setSalesChannelDomainsWithoutHttps"\n                        domain="KlarnaPayment.settings">\n                        <template #card-element="{ element, config }">\n                            <div v-show="displayField(element, config)">\n                                <sw-container v-if="element.name.endsWith(\'allowedKlarnaPaymentsCodes\')">\n                                    <div class="klarna-payment-settings-kp__info">\n                                        <ul>\n                                            <li>\n                                                <h3>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payLater.title\') }}</h3>\n                                                <img src="https://x.klarnacdn.net/payment-method/assets/badges/generic/klarna.png" :title="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payLater.title\')" :alt="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payLater.title\')"/>\n                                                <p>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payLater.description\') }}</p>\n                                            </li>\n                                            <li>\n                                                <h3>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.sliceIt.title\') }}</h3>\n                                                <img src="https://x.klarnacdn.net/payment-method/assets/badges/generic/klarna.png" :title="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.sliceIt.title\')" :alt="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.sliceIt.title\')"/>\n                                                <p>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.sliceIt.description\') }}</p>\n                                            </li>\n                                            <li>\n                                                <h3>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payNow.title\') }}</h3>\n                                                <img src="https://x.klarnacdn.net/payment-method/assets/badges/generic/klarna.png" :title="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payNow.title\')" :alt="$tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payNow.title\')"/>\n                                                <p>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payNow.description\') }}</p>\n                                                <p><sw-icon name="default-badge-info" small color="#3498db"></sw-icon> {{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.payNow.additional\') }}</p>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </sw-container>\n\n                                <sw-container v-if="element.name.endsWith(\'termsCategory\') && salesChannelDomainsWithoutHttps.length > 0">\n                                    <sw-alert variant="warning" appearance="default" :showIcon="true" :closable="false">\n                                        <p>{{ $tc(\'klarna-payment-configuration.settingsForm.klarnaPayments.instantShopping.domainsWithoutHttps\', salesChannelDomainsWithoutHttps.length, { domains: salesChannelDomainsWithoutHttps }) }}</p>\n                                        <ul v-if="salesChannelDomainsWithoutHttps.length > 1">\n                                            <li v-for="domain in salesChannelDomainsWithoutHttps">\n                                                {{ domain }}\n                                            </li>\n                                        </ul>\n                                        <p>{{ $t(\'klarna-payment-configuration.settingsForm.klarnaPayments.instantShopping.domainsWithoutHttpsRecommendation\') }}</p>\n                                    </sw-alert>\n                                </sw-container>\n\n                                <sw-form-field-renderer\n                                    :config="{\n                                        componentName: \'sw-entity-single-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        entity: \'state_machine_state\',\n                                        criteria: getOrderStatusCriteria(),\n                                    }"\n                                    v-model="config[element.name]"\n                                    v-if="element.name.endsWith(\'OrderStatus\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                    :config="{\n                                        componentName: \'sw-entity-single-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        entity: \'state_machine_state\',\n                                        criteria: getDeliveryStatusCriteria(),\n                                    }"\n                                    v-model="config[element.name]"\n                                    v-else-if="element.name.endsWith(\'DeliveryStatus\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                    :config="{\n                                        componentName: \'sw-entity-single-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        entity: \'shipping_method\',\n                                    }"\n                                    v-model="config[element.name]"\n                                    v-else-if="element.name.endsWith(\'DeliveryMethod\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                        :config="{\n                                        componentName: \'sw-entity-single-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        entity: \'category\',\n                                        criteria: getTermsCriteria(),\n                                    }"\n                                        v-model="config[element.name]"\n                                        v-else-if="element.name.endsWith(\'termsCategory\')">\n                                </sw-form-field-renderer>\n\n\n                                <sw-form-field-renderer\n                                    :config="{\n                                        componentName: \'sw-multi-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        multi: true,\n                                        options: paymentMethods,\n                                    }"\n                                    v-model="config[element.name]"\n                                    v-else-if="element.name.endsWith(\'externalPaymentMethods\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                    :config="{\n                                        componentName: \'sw-multi-select\',\n                                        label: getInlineSnippet(element.config.label),\n                                        helpText: getInlineSnippet(element.config.helpText),\n                                        multi: true,\n                                        options: externalCheckoutPaymentMethods,\n                                    }"\n                                    v-model="config[element.name]"\n                                    v-else-if="element.name.endsWith(\'externalCheckouts\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                    v-bind="getBind(element, config)"\n                                    v-model.trim="config[element.name]"\n                                    :disabled="disableField(element)"\n                                    v-else-if="element.name.endsWith(\'Username\') || element.name.endsWith(\'Password\')">\n                                </sw-form-field-renderer>\n\n                                <sw-form-field-renderer\n                                    v-bind="getBind(element, config)"\n                                    v-model="config[element.name]"\n                                    :disabled="disableField(element)"\n                                    v-else>\n                                </sw-form-field-renderer>\n\n                                <div v-if="element.name.endsWith(\'isOnsiteMessagingActive\')" class="klarna-field--osm-description">\n                                    <p>\n                                        <a v-if="getConfigValue(\'testMode\')" target="_blank"\n                                           :href="$tc(\'klarna-payment-configuration.settingsForm.onsiteMessaging.playgroundUrl\')">\n                                            <sw-button size="x-small">\n                                                {{ $tc(\'klarna-payment-configuration.settingsForm.onsiteMessaging.generate\')}}\n                                            </sw-button>\n                                        </a>\n                                        <a v-else target="_blank"\n                                           :href="$tc(\'klarna-payment-configuration.settingsForm.onsiteMessaging.defaultUrl\')">\n                                            <sw-button size="x-small">\n                                                {{ $tc(\'klarna-payment-configuration.settingsForm.onsiteMessaging.generate\')}}\n                                            </sw-button>\n                                        </a>\n                                    </p>\n                                </div>\n                            </div>\n                        </template>\n                    </sw-system-config>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n'},yZQw:function(e,t){e.exports='{% block sw_order_detail_content_tabs_general %}\n    {% parent %}\n\n    <template v-for="transaction in klarnaTransactions">\n        {% block klarna_payment_payment_tab %}\n            <sw-tabs-item :route="{name: \'klarna-payment-order-management.payment.detail\', params: { id: $route.params.id, transaction: transaction.transaction } }" :title="$tc(\'klarna-payment-order-management.order-tab.title\')">\n                <span :class="transaction.cancelled ? \'klarna-tab-error\' : \'\'">\n                    {{ $tc(\'klarna-payment-order-management.order-tab.title\') }}\n\n                    <sw-icon v-if="transaction.cancelled"\n                             class="klarna-error-badge"\n                             name="default-badge-warning"\n                             size="14px"\n                             v-tooltip="{ message: $tc(\'klarna-payment-order-management.tooltips.transactionCancelled\') }">\n                    </sw-icon>\n                </span>\n            </sw-tabs-item>\n        {% endblock %}\n    </template>\n{% endblock %}\n'}},[["wgOB","runtime","vendors-node"]]]);